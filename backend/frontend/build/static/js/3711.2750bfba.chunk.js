(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3711],{84292:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>C});var i=o(72791),n=o(79271),s=o(74569),l=o.n(s),t=o(89743),r=o(16149),c=o(2677),d=o(43360),h=o(34575),m=o(19658),p=(o(58484),o(97473),o(64554)),u=o(39157),j=o(13239),v=o(29818),x=o(80184);const b=i.forwardRef((function(e,a){return(0,x.jsx)(m.Z,{elevation:6,ref:a,variant:"filled",...e})}));const C=(0,n.EN)((function(e){let[a,o]=(0,i.useState)([]),[n,s]=(0,i.useState)([]),[m,C]=(0,i.useState)(""),[Z,y]=(0,i.useState)("");const g=l().create({baseURL:"http://ec2-65-2-5-82.ap-south-1.compute.amazonaws.com/"});let[f,N]=(0,i.useState)({}),[k,I]=(0,i.useState)({}),[P,w]=(0,i.useState)(!1),[O,S]=(0,i.useState)(!1);const[_,F]=(0,i.useState)(!0),[T,L]=(0,i.useState)(!1),[B,D]=(0,i.useState)(!1);let[G,A]=(0,i.useState)("Choose..."),M=(e,a)=>{N({...f,[e]:a}),k[e]&&I({...k,[e]:null})};(0,i.useEffect)((()=>{g.get("projonline/users",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{o(e.data.users.filter((e=>"Mobitel"===e.company.companyName))),s(e.data.companys),N({adminRights:!1,activeStatus:!1,userCanAssignForTask:!1,isProjectCoordinator:!1,verificationOneId:"1",verificationTwoId:"1",approvalId:"1"})})).catch((e=>{console.log(e)}))}),[]);const V=(e,a)=>{"clickaway"!==a&&w(!1)};return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"content-wrapper",children:[(0,x.jsx)("div",{className:"content-header",children:(0,x.jsx)("section",{className:"content-header",children:(0,x.jsx)("div",{className:"container-fluid",children:(0,x.jsx)("div",{className:"row mb-2",children:(0,x.jsx)("div",{className:"col-sm-6",children:(0,x.jsx)("h1",{children:"Add New user"})})})})})}),(0,x.jsx)("section",{className:"content",children:(0,x.jsx)("div",{className:"container-fluid",children:(0,x.jsxs)("form",{onSubmit:a=>{a.preventDefault();const o=(()=>{const{name:e,username:a,email:o,company:i,projectCoordinator:n,userDiv:s,visbilityBasedOn:l,mobileNo:t,verificationOneId:r,verificationTwoId:c,approvalId:d}=f,h={};return"Mobitel"!==i||"Choose..."!==s&&s||(h.userDiv="Choose a division!"),"Mobitel"!==i||"Choose..."!==l&&l||(h.visbilityBasedOn="Choose a option!"),o&&""!==o||(h.email="cannot be blank!"),i&&"Choose..."!==i||(h.company="Select a option!"),e&&""!==e||(h.name="cannot be blank!"),a&&""!==a||(h.username="cannot be blank!"),t&&""!==t||(h.mobileNo="cannot be blank!"),h})();if(Object.keys(o).length>0)I(o);else{var i={};if("Mobitel"===f.company){var s=[f.verificationOneId,f.verificationTwoId,f.approvalId].filter((e=>"1"!==e)).filter((e=>"2"!==e));i={name:f.name,email:f.email,company:n.find((e=>e.companyName===f.company))._id,userDiv:f.userDiv,mobileNo:f.mobileNo,username:f.username,adminRights:B,activeStatus:_,userCanAssignForTask:T,visbilityBasedOn:f.visbilityBasedOn,projectCoordinator:"1"==f.projectCoordinator?null:f.projectCoordinator,isProjectCoordinator:f.isProjectCoordinator,approvalPath:s}}else i={name:f.name,email:f.email,company:n.find((e=>e.companyName===f.company))._id,mobileNo:f.mobileNo,username:f.username,adminRights:B,activeStatus:_,visbilityBasedOn:n.find((e=>e.companyName===f.company)).companyCategory,userCanAssignForTask:T,approvalPath:[]};g.post("projonline/signup",i,{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((a=>{S(!0),setTimeout((()=>{C(a.data.msg),y(a.data.variant),w(!0)}),2e3),setTimeout((()=>{S(!1),w(!1),e.history.push({pathname:"/updateUser"})}),5e3)})).catch((e=>{console.log(e)}))}},enctype:"multipart/form-data",children:[(0,x.jsxs)(t.Z,{className:"mb-3",children:[(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Name"}),(0,x.jsx)(r.Z.Control,{onChange:e=>M("name",e.target.value),value:f.name,className:"col-md-9",type:"text",isInvalid:!!k.name}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.name})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Username"}),(0,x.jsx)(r.Z.Control,{onChange:e=>M("username",e.target.value),value:f.username,className:"col-md-9",type:"text",isInvalid:!!k.username}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.username})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Email"}),(0,x.jsx)(r.Z.Control,{onChange:e=>M("email",e.target.value),value:f.email,className:"col-md-9",type:"text",isInvalid:!!k.email}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.email})]})]}),(0,x.jsxs)(t.Z,{className:"mb-3",children:[(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Company"}),(0,x.jsxs)(r.Z.Control,{onChange:e=>{M("company",e.target.value),(e=>{const a=n.find((a=>a.companyName===e));a&&A(a.companyCategory)})(e.target.value)},value:f.company,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!k.company,children:[(0,x.jsx)("option",{children:"Choose..."}),n.map((e=>(0,x.jsx)("option",{value:e.companyName,children:e.companyName},e.companyName)))]}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.company})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"User Division"}),(0,x.jsxs)(r.Z.Control,{onChange:e=>M("userDiv",e.target.value),value:f.userDiv,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!k.userDiv,disabled:"Mobitel"!==f.company,children:[(0,x.jsx)("option",{value:"Choose...",children:"Choose..."}),(0,x.jsx)("option",{children:"Planning_Radio"}),(0,x.jsx)("option",{children:"Planning_Core"}),(0,x.jsx)("option",{children:"Planning_TX"}),(0,x.jsx)("option",{children:"Planning_IBS"}),(0,x.jsx)("option",{children:"Planning_WiFi"}),(0,x.jsx)("option",{children:"Project_Radio"}),(0,x.jsx)("option",{children:"Project_Core"}),(0,x.jsx)("option",{children:"Project_TX"}),(0,x.jsx)("option",{children:"Project_IBS"}),(0,x.jsx)("option",{children:"Project_WiFi"})]}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.userDiv})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Mobile No"}),(0,x.jsx)(r.Z.Control,{onChange:e=>M("mobileNo",e.target.value),value:f.mobileNo,className:"col-md-9",type:"number",isInvalid:!!k.mobileNo}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.mobileNo})]})]}),(0,x.jsxs)(t.Z,{className:"mb-3",children:[(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Visibility Based On"}),(0,x.jsxs)(r.Z.Control,{onChange:e=>M("visbilityBasedOn",e.target.value),value:"Mobitel"!==f.company?"company":f.visbilityBasedOn,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!k.visbilityBasedOn,disabled:"Mobitel"!==f.company,children:[(0,x.jsx)("option",{children:G}),(0,x.jsx)("option",{value:"Admin",children:"Admin"}),(0,x.jsx)("option",{value:"Planning",children:"Planning"}),(0,x.jsx)("option",{value:"Project_Div_Head",children:"Project_Div_Head"}),(0,x.jsx)("option",{value:"Project_PM",children:"Project_PM"}),(0,x.jsx)("option",{value:"Project_TO",children:"Project_TO"}),(0,x.jsx)("option",{value:"Project_Coor",children:"Project_Coor"}),(0,x.jsx)("option",{value:"Subcon",children:"Subcon"}),(0,x.jsx)("option",{value:"Optimization",children:"Optimization"})]}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.visbilityBasedOn})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Project Coordinator"}),(0,x.jsxs)(r.Z.Control,{as:"select",onChange:e=>M("projectCoordinator",e.target.value),value:f.projectCoordinator,className:"col-md-9",defaultValue:"Choose...",isInvalid:!!k.visbilityBasedOn,disabled:"Mobitel"!==f.company,children:[(0,x.jsx)("option",{value:"1",children:"Choose..."}),a.filter((e=>!0===e.isProjectCoordinator)).map((e=>(0,x.jsx)("option",{value:e._id,children:e.name})))]}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.projectCoordinator})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Is Project Coordinator"}),(0,x.jsx)(r.Z.Check,{onChange:e=>M("isProjectCoordinator",!f.isProjectCoordinator),value:f.isProjectCoordinator,checked:f.isProjectCoordinator,className:"col-md-9",id:"custom-switch-4",type:"switch",disabled:"Mobitel"!==f.company})]})]}),(0,x.jsxs)(t.Z,{className:"mb-3",children:[(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Admin Rights"}),(0,x.jsx)(r.Z.Check,{onChange:e=>{M("adminRights",!B),D(!B)},value:B,checked:B,className:"col-md-9",id:"custom-switch-1",type:"switch"})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Active Status"}),(0,x.jsx)(r.Z.Check,{onChange:e=>F(!_),value:_,checked:_,className:"col-md-9",id:"custom-switch-2",type:"switch"})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"User Can Assign For Task"}),(0,x.jsx)(r.Z.Check,{onChange:e=>L(!T),value:T,checked:T,className:"col-md-9",id:"custom-switch-3",type:"switch"})]})]}),(0,x.jsxs)(t.Z,{children:[(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Verification by (Level 1)"}),(0,x.jsxs)(r.Z.Control,{as:"select",className:"col-md-9",onChange:e=>M("verificationOneId",e.target.value),value:f.verificationOneId,isInvalid:!!k.verificationOneId,defaultValue:"Choose...",disabled:!0!==T,children:[(0,x.jsx)("option",{value:"1",children:"Choose..."}),a.map((e=>(0,x.jsx)("option",{value:e._id,children:e.name})))]}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.verificationOneId})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Verification by (Level 2)"}),(0,x.jsxs)(r.Z.Control,{as:"select",className:"col-md-9",onChange:e=>M("verificationTwoId",e.target.value),value:f.verificationTwoId,isInvalid:!!k.verificationTwoId,defaultValue:"Choose...",disabled:!0!==T,children:[(0,x.jsx)("option",{value:"1",children:"Choose..."}),(0,x.jsx)("option",{value:"2",children:"Not Applicable"}),a.map((e=>(0,x.jsx)("option",{value:e._id,children:e.name})))]}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.verificationTwoId})]}),(0,x.jsxs)(r.Z.Group,{as:c.Z,children:[(0,x.jsx)(r.Z.Label,{children:"Approval by"}),(0,x.jsxs)(r.Z.Control,{as:"select",className:"col-md-9",onChange:e=>M("approvalId",e.target.value),value:f.approvalId,isInvalid:!!k.approvalId,defaultValue:"Choose...",disabled:!0!==T,children:[(0,x.jsx)("option",{value:"1",children:"Choose..."}),a.map((e=>(0,x.jsx)("option",{value:e._id,children:e.name})))]}),(0,x.jsx)(r.Z.Control.Feedback,{type:"invalid",children:k.approvalId})]})]}),(0,x.jsx)(d.Z,{variant:"primary",type:"submit",children:"Add a New User"})]})})})]}),(0,x.jsx)(h.Z,{open:P,autoHideDuration:6e3,onClose:V,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,x.jsx)(b,{onClose:V,severity:Z,sx:{width:"100%"},children:m})}),(0,x.jsx)(v.Z,{open:O,onClose:V,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,x.jsx)(u.Z,{children:(0,x.jsx)(p.Z,{sx:{display:"flex"},children:(0,x.jsx)(j.Z,{})})})})]})}))},97473:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},55382:()=>{},72095:()=>{},61219:()=>{}}]);
//# sourceMappingURL=3711.2750bfba.chunk.js.map