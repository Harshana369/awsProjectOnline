"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4215],{96201:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var o=a(72791),n=a(79271),r=a(74569),i=a.n(r),s=a(3986),l=a(2468),c=a(64554),d=(a(76897),a(25498),a(31052),a(43360)),m=a(39474),h=a(16149),u=a(89743),v=a(2677),p=(a(19658),a(80184));const f=(0,n.EN)((function(e){let[t,a]=(0,o.useState)(!1),[n,r]=(0,o.useState)(!1),[f,w]=(0,o.useState)([]);const x=i().create({baseURL:"http://ec2-65-2-5-82.ap-south-1.compute.amazonaws.com/"});let[g,j]=(0,o.useState)([]),[Z,b]=(0,o.useState)({}),[S,k]=(0,o.useState)([]),[N,y]=(0,o.useState)(!1),[D,H]=(0,o.useState)(!1),[O,P]=(0,o.useState)(""),[T,A]=(0,o.useState)(""),[C,I]=(0,o.useState)([]);(0,o.useEffect)((()=>{R(),r(!0),x.get("projonline/gettasks",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{w(e.data.tasks),r(!1)})).catch((e=>{console.log(e)}))}),[]);const R=()=>{x.get("projonline/mobitelusers",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{const t=e.data.map((e=>({name:e.name,_id:e._id})));I(t)})).catch((e=>{console.log(e)}))},z=(e,t)=>{k(t),console.log(t)},M=[{field:"taskRef",headerName:"Task ID",width:400},{field:"siteID",headerName:"Site ID",width:125},{field:"project",headerName:"Project",width:150},{field:"subProject",headerName:"Sub Project",width:180},{field:"companyName",headerName:"Subcon / Vendor",width:220,valueGetter:e=>e.row.assignedSubcon&&e.row.assignedSubcon.companyName?e.row.assignedSubcon.companyName:""},{field:"assignedMobitelOfficer",headerName:"Assigned Officer",width:210,valueGetter:e=>e.row.assignedMobitelOfficer&&e.row.assignedMobitelOfficer.name?e.row.assignedMobitelOfficer.name:""},{field:"Task handed over",headerName:"Task Handover Date",width:235,valueGetter:e=>{for(let t=0;t<e.row.taskHistory.length;t++){if("Task handed over"===e.row.taskHistory[t].taskStatus){const a=e.row.taskHistory[t].performedDate,o=new Date(a),n=o.getFullYear(),r=o.getMonth()+1,i=o.getDate();return"".concat(n,"-").concat(r<10?"0":"").concat(r,"-").concat(i<10?"0":"").concat(i)}}}},{field:"Sitecommissioned",headerName:"Commissioned Date",width:240,valueGetter:e=>{for(let t=0;t<e.row.taskHistory.length;t++){if("Site Commissioned"===e.row.taskHistory[t].comStatus){const a=e.row.taskHistory[t].performedDate,o=new Date(a),n=o.getFullYear(),r=o.getMonth()+1,i=o.getDate();return"".concat(n,"-").concat(r<10?"0":"").concat(r,"-").concat(i<10?"0":"").concat(i)}}}},{field:"patStatus",headerName:"PAT Status",width:160},{field:"onairStatus",headerName:"On-Air Status",width:180},{field:"optimizationAcceptance",headerName:"RNO Acceptance",width:210},{field:"optimizationAcceptedBy",headerName:"RNO Accepted By",width:220,valueGetter:e=>{for(let t=0;t<e.row.taskHistory.length;t++){if("Optimization Accepted"===e.row.taskHistory[t].taskStatus){const a=e.row.taskHistory[t].performedBy;let o=null;return C.forEach((e=>{o=a.name})),o}}}},{field:"Handover",width:150,cellClassName:"small-font",renderCell:e=>(0,p.jsx)(d.Z,{color:"primary",onClick:t=>{z(0,e),y(!0)},children:"See Handover"})},{field:"RNO Action",width:170,cellClassName:"small-font",renderCell:e=>(0,p.jsx)(d.Z,{color:"primary",onClick:t=>{z(0,e),H(!0)},style:{textAlign:"center"},disabled:""!==e.row.optimizationAcceptance&&void 0!==e.row.optimizationAcceptance,children:"Accept"})}];return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"content-wrapper",children:[(0,p.jsx)("div",{className:"content-header",children:(0,p.jsx)("div",{className:"col-sm-6",children:(0,p.jsx)("h1",{children:"All Tasks"})})}),(0,p.jsx)(m.Z,{show:N,onHide:function(){y(!1)},animation:!1,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,p.jsxs)(c.Z,{sx:l.Z,children:[(0,p.jsx)(m.Z.Header,{closeButton:!0,children:(0,p.jsx)(m.Z.Title,{children:"Handover Details"})}),!0===N?(0,p.jsxs)(m.Z.Body,{children:[(0,p.jsx)("div",{children:(0,p.jsxs)(h.Z.Label,{style:{fontWeight:"normal"},children:["Site ID : ",S.row.siteID]})}),(0,p.jsx)("div",{children:(0,p.jsxs)(h.Z.Label,{style:{fontWeight:"normal"},children:["Site Name : ",S.row.siteName]})}),(0,p.jsx)("div",{className:"mb-3",children:(0,p.jsxs)(h.Z.Label,{style:{fontWeight:"normal"},children:["Task ID : ",S.row.taskRef]})}),(0,p.jsx)("div",{style:{height:500},children:(0,p.jsx)(s._$r,{rows:S.row.headerProperties.map(((e,t)=>({id:t,DataField:e,Info:S.row.properties[t]}))),columns:[{field:"DataField",headerName:"Data Field",flex:1},{field:"Info",headerName:"Info",flex:1}],pageSize:15,rowsPerPageOptions:[15],rowHeight:25,headerHeight:30,components:{Toolbar:s.npt}})})]}):null]})}),(0,p.jsx)(m.Z,{show:D,onHide:function(){H(!1)},animation:!1,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,p.jsxs)(c.Z,{sx:l.Z,children:[(0,p.jsx)(m.Z.Header,{closeButton:!0,children:(0,p.jsx)(m.Z.Title,{children:"Submit Status"})}),!0===D?(0,p.jsxs)(m.Z.Body,{children:[(0,p.jsx)("div",{children:(0,p.jsxs)(h.Z.Label,{style:{fontWeight:"normal"},children:["Site ID : ",S.row.siteID]})}),(0,p.jsx)("div",{children:(0,p.jsxs)(h.Z.Label,{style:{fontWeight:"normal"},children:["Site Name : ",S.row.siteName]})}),(0,p.jsx)("div",{className:"mb-3",children:(0,p.jsxs)(h.Z.Label,{style:{fontWeight:"normal"},children:["Task ID : ",S.row.taskRef]})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("row",{children:(0,p.jsx)(h.Z.Label,{children:"Status : "})}),(0,p.jsx)("row",{children:" Accepted"}),(0,p.jsx)(u.Z,{children:(0,p.jsxs)(h.Z.Group,{as:v.Z,sm:12,children:[(0,p.jsx)(h.Z.Label,{children:"Comments :"}),(0,p.jsx)(h.Z.Control,{onChange:e=>{return t="taskOptimizationComment",a=e.target.value,void b({...Z,[t]:a});var t,a},as:"textarea",rows:2,value:Z.taskOptimizationComment,placeholder:"Enter your comments here..."})]})}),(0,p.jsx)("div",{className:"d-flex justify-content-between",children:(0,p.jsx)(d.Z,{variant:"primary",onClick:e=>{e.preventDefault();x.put("projonline/update/"+S.row._id,{taskObject:{optimizationAcceptance:"Accepted"},taskHistory:{taskStatus:"Optimization Accepted",comment:Z.taskOptimizationComment}},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{r(!0),setTimeout((()=>{A(e.data.alart),P(e.data.severity),a(!0)}),2e3),setTimeout((()=>{r(!1),a(!1),H(!1)}),1e3)})).catch((e=>{console.log(e)}))},className:"ml-auto",children:"Submit"})})]})]}):null]})}),(0,p.jsx)("div",{style:{height:610,width:"100%"},children:(0,p.jsx)(s._$r,{getRowId:e=>e._id,rows:f,columns:M,pageSize:15,rowsPerPageOptions:[15],rowHeight:30,headerHeight:40,components:{Toolbar:s.npt}})})]})})}))},64554:(e,t,a)=>{a.d(t,{Z:()=>v});var o=a(87462),n=a(63366),r=a(72791),i=a(28182),s=a(90153),l=a(60104),c=a(78519),d=a(50886),m=a(80184);const h=["className","component"];const u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultTheme:t}=e,a=(0,s.ZP)("div")(l.Z);return r.forwardRef((function(e,r){const s=(0,d.Z)(t),l=(0,c.Z)(e),{className:u,component:v="div"}=l,p=(0,n.Z)(l,h);return(0,m.jsx)(a,(0,o.Z)({as:v,ref:r,className:(0,i.Z)(u,"MuiBox-root"),theme:s},p))}))}({defaultTheme:(0,a(61979).Z)()}),v=u},10703:(e,t,a)=>{a.d(t,{Z:()=>w});var o=a(63366),n=a(87462),r=a(72791),i=a(28182),s=a(85683),l=a(12065),c=a(47630),d=a(61046),m=a(89500);function h(e){return(0,m.Z)("MuiPaper",e)}(0,a(72823).Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var u=a(80184);const v=["className","component","elevation","square","variant"],p=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)},f=(0,c.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],!a.square&&t.rounded,"elevation"===a.variant&&t["elevation".concat(a.elevation)]]}})((e=>{let{theme:t,ownerState:a}=e;return(0,n.Z)({backgroundColor:t.palette.background.paper,color:t.palette.text.primary,transition:t.transitions.create("box-shadow")},!a.square&&{borderRadius:t.shape.borderRadius},"outlined"===a.variant&&{border:"1px solid ".concat(t.palette.divider)},"elevation"===a.variant&&(0,n.Z)({boxShadow:t.shadows[a.elevation]},"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,l.Fq)("#fff",p(a.elevation)),", ").concat((0,l.Fq)("#fff",p(a.elevation)),")")}))})),w=r.forwardRef((function(e,t){const a=(0,d.Z)({props:e,name:"MuiPaper"}),{className:r,component:l="div",elevation:c=1,square:m=!1,variant:p="elevation"}=a,w=(0,o.Z)(a,v),x=(0,n.Z)({},a,{component:l,elevation:c,square:m,variant:p}),g=(e=>{const{square:t,elevation:a,variant:o,classes:n}=e,r={root:["root",o,!t&&"rounded","elevation"===o&&"elevation".concat(a)]};return(0,s.Z)(r,h,n)})(x);return(0,u.jsx)(f,(0,n.Z)({as:l,ownerState:x,className:(0,i.Z)(g.root,r),ref:t},w))}))},78519:(e,t,a)=>{a.d(t,{Z:()=>l});var o=a(87462),n=a(63366),r=a(46001);const i=["sx"],s=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((a=>{r.G[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]})),t};function l(e){const{sx:t}=e,a=(0,n.Z)(e,i),{systemProps:r,otherProps:l}=s(a);return(0,o.Z)({},l,{sx:(0,o.Z)({},r,t)})}},2468:(e,t,a)=>{a.d(t,{Z:()=>o});const o={}}}]);
//# sourceMappingURL=4215.e2767033.chunk.js.map