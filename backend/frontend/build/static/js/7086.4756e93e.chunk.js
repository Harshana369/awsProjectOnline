"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7086],{7086:(e,s,r)=>{r.r(s),r.d(s,{default:()=>x});var t=r(72791),a=r(79271),n=r(74569),o=r.n(n),i=r(24518),l=r(29818),c=r(39157),d=r(64554),u=r(13239),h=r(64668),m=r(71358),p=r(87376),g=r(80184);const x=(0,a.EN)((function(e){const[s,r]=(0,t.useState)(!1),[a,n]=(0,t.useState)([]),[x,j]=(0,t.useState)(1),[b,f]=(0,t.useState)(1),S=o().create({baseURL:"http://35.78.68.113:8072"});(0,t.useEffect)((()=>{r(!0),S.get("projonline/gettasks/toBeRaisedPr",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{n(e.data.tasks),r(!1)})).catch((e=>{console.log(e)}))}),[]);const v=(0,t.useMemo)((()=>a),[a]),k=(0,t.useMemo)((()=>[{Header:"Task ID",accessor:"taskRef"},{Header:"Site ID",accessor:"siteID"},{Header:"Assigned Subcon",accessor:e=>e.assignedSubcon.companyName},{Header:"Assigned Officer",accessor:e=>e.assignedMobitelOfficer.name},{Header:"Initiated date",accessor:e=>{const s=e.taskHistory.find((e=>"Subcon allocated"===e.taskStatus));return s?s.performedDate.split("T")[0]:""}},{Header:"Capex Pr Amount",accessor:e=>{const s=e.boqs;return(s.length>0&&s[s.length-1].CapexPrAmount||0||"Not Defined").toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}},{Header:"Opex Pr Amount",accessor:e=>{const s=e.boqs;return(s.length>0&&s[s.length-1].OpexPrAmount||0||"Not Defined").toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}},{Header:"Total Cost",accessor:e=>(e.boqs[e.boqs.length-1].totalCost||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{Header:"To Raise PR",accessor:"toRaisePR",Cell:e=>{let{cell:{value:s,row:r}}=e;return(0,g.jsx)(i.Z,{variant:"contained",color:"primary",onClick:e=>{P(e,r.original)},children:"To Raise PR"})},Filter:!1}]),[]),P=(s,r)=>{e.history.push({pathname:"/raisePrSpecificTask",data:r})},{getTableProps:w,getTableBodyProps:y,headerGroups:C,rows:R,prepareRow:F}=(0,m.useTable)({columns:k,data:v,defaultColumn:{Filter:p.v3}},m.useFilters,m.useSortBy);return(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:"content-wrapper",children:[(0,g.jsx)("div",{className:"content-header",children:(0,g.jsx)("section",{className:"content-header",children:(0,g.jsx)("div",{className:"container-fluid",children:(0,g.jsx)("div",{className:"row mb-2",children:(0,g.jsx)("div",{className:"col-sm-6",children:(0,g.jsx)("h1",{children:"All Tasks to Raise PRs"})})})})})}),(0,g.jsx)("div",{style:{backgroundColor:"white",width:"100%"},children:(0,g.jsxs)(h.Z,{bordered:!0,hover:!0,...w(),children:[(0,g.jsx)("thead",{children:C.map((e=>(0,g.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>(0,g.jsxs)("th",{...e.getHeaderProps(),children:[(0,g.jsx)("div",{...e.getSortByToggleProps(),children:e.render("Header")}),(0,g.jsx)(p.wn,{column:e})]})))})))}),(0,g.jsx)("tbody",{...y(),children:R.map((e=>(F(e),(0,g.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e=>(0,g.jsx)("td",{...e.getCellProps(),style:{width:"10px"},children:e.render("Cell")})))}))))})]})}),(0,g.jsx)(l.Z,{open:s,onClose:(e,s)=>{"clickaway"!==s&&r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,g.jsx)(c.Z,{children:(0,g.jsx)(d.Z,{sx:{display:"flex"},children:(0,g.jsx)(u.Z,{})})})})]})})}))},87376:(e,s,r)=>{r.d(s,{v3:()=>o,wn:()=>n});r(72791);var t=r(54555),a=r(80184);const n=e=>{let{column:s}=e;return(0,a.jsx)("div",{style:{marginTop:5},children:s.canFilter&&s.render("Filter")})},o=e=>{let{column:{filterValue:s,setFilter:r,preFilteredRows:{length:n}}}=e;return(0,a.jsx)(t.Z,{value:s||"",onChange:e=>{r(e.target.value||void 0)},placeholder:"search (".concat(n,") ...")})}}}]);
//# sourceMappingURL=7086.4756e93e.chunk.js.map