"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7086],{7086:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var r=t(72791),a=t(79271),o=t(74569),n=t.n(o),i=t(24518),c=t(29818),l=t(39157),d=t(64554),u=t(13239),h=t(64668),m=t(71358),p=t(87376),g=t(80184);const x=(0,a.EN)((function(e){const[s,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)([]),[x,j]=(0,r.useState)(1),[b,f]=(0,r.useState)(1),S=n().create({baseURL:"http://ec2-65-2-5-82.ap-south-1.compute.amazonaws.com/"});(0,r.useEffect)((()=>{t(!0),S.get("projonline/gettasks/toBeRaisedPr",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{o(e.data.tasks),t(!1)})).catch((e=>{console.log(e)}))}),[]);const v=(0,r.useMemo)((()=>a),[a]),k=(0,r.useMemo)((()=>[{Header:"Task ID",accessor:"taskRef"},{Header:"Site ID",accessor:"siteID"},{Header:"Assigned Subcon",accessor:e=>e.assignedSubcon.companyName},{Header:"Assigned Officer",accessor:e=>e.assignedMobitelOfficer.name},{Header:"Initiated date",accessor:e=>{const s=e.taskHistory.find((e=>"Subcon allocated"===e.taskStatus));return s?s.performedDate.split("T")[0]:""}},{Header:"Capex Pr Amount",accessor:e=>{const s=e.boqs;return(s.length>0&&s[s.length-1].CapexPrAmount||0||"Not Defined").toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}},{Header:"Opex Pr Amount",accessor:e=>{const s=e.boqs;return(s.length>0&&s[s.length-1].OpexPrAmount||0||"Not Defined").toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}},{Header:"Total Cost",accessor:e=>(e.boqs[e.boqs.length-1].totalCost||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{Header:"To Raise PR",accessor:"toRaisePR",Cell:e=>{let{cell:{value:s,row:t}}=e;return(0,g.jsx)(i.Z,{variant:"contained",color:"primary",onClick:e=>{P(e,t.original)},children:"To Raise PR"})},Filter:!1}]),[]),P=(s,t)=>{e.history.push({pathname:"/raisePrSpecificTask",data:t})},{getTableProps:w,getTableBodyProps:y,headerGroups:C,rows:R,prepareRow:F}=(0,m.useTable)({columns:k,data:v,defaultColumn:{Filter:p.v3}},m.useFilters,m.useSortBy);return(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:"content-wrapper",children:[(0,g.jsx)("div",{className:"content-header",children:(0,g.jsx)("section",{className:"content-header",children:(0,g.jsx)("div",{className:"container-fluid",children:(0,g.jsx)("div",{className:"row mb-2",children:(0,g.jsx)("div",{className:"col-sm-6",children:(0,g.jsx)("h1",{children:"All Tasks to Raise PRs"})})})})})}),(0,g.jsx)("div",{style:{backgroundColor:"white",width:"100%"},children:(0,g.jsxs)(h.Z,{bordered:!0,hover:!0,...w(),children:[(0,g.jsx)("thead",{children:C.map((e=>(0,g.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>(0,g.jsxs)("th",{...e.getHeaderProps(),children:[(0,g.jsx)("div",{...e.getSortByToggleProps(),children:e.render("Header")}),(0,g.jsx)(p.wn,{column:e})]})))})))}),(0,g.jsx)("tbody",{...y(),children:R.map((e=>(F(e),(0,g.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e=>(0,g.jsx)("td",{...e.getCellProps(),style:{width:"10px"},children:e.render("Cell")})))}))))})]})}),(0,g.jsx)(c.Z,{open:s,onClose:(e,s)=>{"clickaway"!==s&&t(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,g.jsx)(l.Z,{children:(0,g.jsx)(d.Z,{sx:{display:"flex"},children:(0,g.jsx)(u.Z,{})})})})]})})}))},87376:(e,s,t)=>{t.d(s,{v3:()=>n,wn:()=>o});t(72791);var r=t(54555),a=t(80184);const o=e=>{let{column:s}=e;return(0,a.jsx)("div",{style:{marginTop:5},children:s.canFilter&&s.render("Filter")})},n=e=>{let{column:{filterValue:s,setFilter:t,preFilteredRows:{length:o}}}=e;return(0,a.jsx)(r.Z,{value:s||"",onChange:e=>{t(e.target.value||void 0)},placeholder:"search (".concat(o,") ...")})}}}]);
//# sourceMappingURL=7086.c912df2d.chunk.js.map