(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7028],{53063:(e,t,a)=>{"use strict";a.d(t,{Z:()=>B});var o=a(83837),i=a(94026),d=a(1288),n=a(20269),r=a(26513),l=a(82159),s=a(72791),c=a(15617),x=a.n(c),p=a(63727),h=a(51859),m=a(74569),u=a.n(m),f=a(5936),C=a(3395),b=a(872),g=a(31009),j=a(38996),Z=a(5130),y=a(82271),v=a(41286),S=a(91903),k=a(12715),w=a(10111),R=a(35585),O=a(16346),P=a(5403),D=a(97911),A=a(80184);let I=[];function B(e){const[t,a]=(0,s.useState)(I),[c,m]=(0,s.useState)("all"),{openPopup:B,setOpenPopup:E}=e,[N,T]=(0,s.useState)([]),L=u().create({baseURL:"http://35.78.68.113:8072"});(0,s.useEffect)((()=>{I=[],L.get("projonline/allRateCards",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((t=>{t.data.filter((t=>t.rateCardSubcon._id===JSON.parse(localStorage.getItem("user")).company._id&&t.rateCardValidTo>=e.acceptedDate&&t.rateCardValidFrom<=e.acceptedDate)).forEach((e=>{e.rateCardItems.forEach((t=>{t.rateCardDiv=e.rateCardDiv,I.push(t)}))}))})).catch((e=>{console.log(e)}))}),[]);const W={Add:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(f.Z,{...e,ref:t}))),Check:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(b.Z,{...e,ref:t}))),Clear:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(Z.Z,{...e,ref:t}))),Delete:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(y.Z,{...e,ref:t}))),DetailPanel:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(j.Z,{...e,ref:t}))),Edit:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(v.Z,{...e,ref:t}))),Export:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(O.Z,{...e,ref:t}))),Filter:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(S.Z,{...e,ref:t}))),FirstPage:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(k.Z,{...e,ref:t}))),LastPage:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(w.Z,{...e,ref:t}))),NextPage:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(j.Z,{...e,ref:t}))),PreviousPage:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(g.Z,{...e,ref:t}))),ResetSearch:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(Z.Z,{...e,ref:t}))),Search:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(P.Z,{...e,ref:t}))),SortArrow:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(C.Z,{...e,ref:t}))),ThirdStateCheck:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(R.Z,{...e,ref:t}))),ViewColumn:(0,s.forwardRef)(((e,t)=>(0,A.jsx)(D.Z,{...e,ref:t})))},F=()=>{Array.isArray(N)&&N.length&&e.callBk(t.filter((e=>N.includes(e)))),E(!1);const o=I.map((e=>({...e,tableData:{checked:!1}})));a(o),T([])},K=()=>{E(!1);const e=I.map((e=>({...e,tableData:{checked:!1}})));a(e),T([])};return(0,s.useEffect)((()=>{a("all"===c?I:I.filter((e=>e.rateCard===c)))}),[c]),(0,A.jsx)(o.Z,{open:B,fullWidth:!0,maxWidth:"lg",children:(0,A.jsx)(i.Z,{children:(0,A.jsx)(x(),{title:"BOQ Line Items",columns:[{title:"ERP Code",field:"erpCode",cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Rate Card Div",field:"rateCardDiv",cellStyle:{width:150,minWidth:150,maxWidth:150,height:1}},{title:"Item Discreption",field:"itemDiscreption",cellStyle:{width:400,minWidth:400,maxWidth:400,height:1}},{title:"UoM",field:"itemUom",cellStyle:{width:150,minWidth:150,maxWidth:150,height:1}},{title:"Unit Rate",field:"itemRate",type:"currency",currencySetting:{currencyCode:"LKR"},cellStyle:{width:200,minWidth:200,maxWidth:200,height:1}}],data:t,icons:W,onSelectionChange:e=>T(e),options:{exportButton:!0,pageSizeOptions:[5,10,20],paginationType:"stepped",showTextRowsSelected:!1,actionsColumnIndex:-1,filtering:!0,selection:!0,tableLayout:"auto",selectionProps:{},rowStyle:{backgroundColor:"#EEE"},headerStyle:{backgroundColor:"#01579b",color:"#FFF"}},actions:[{icon:()=>(0,A.jsxs)(p.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:c,onChange:e=>m(e.target.value),style:{width:100},children:[(0,A.jsx)(h.Z,{value:"all",children:(0,A.jsx)("em",{children:"All"})}),(0,A.jsx)(h.Z,{value:"TX",children:"TX"}),(0,A.jsx)(h.Z,{value:"IBS",children:"IBS"}),(0,A.jsx)(h.Z,{value:"BTS",children:"BTS"})]}),tooltip:"Select Rate Card",isFreeAction:!0}],components:{Pagination:e=>(0,A.jsxs)("div",{children:[(0,A.jsxs)(d.Z,{container:!0,style:{pading:15,background:"#f5f5f5"},children:[(0,A.jsx)(d.Z,{sm:11,align:"right",item:!0,children:(0,A.jsx)(n.Z,{children:(0,A.jsx)(r.Z,{variant:"contained",type:"submit",color:"primary",onClick:F,children:"Submit"})})}),(0,A.jsx)(d.Z,{sm:1,align:"center",item:!0,children:(0,A.jsx)(n.Z,{children:(0,A.jsx)(r.Z,{variant:"contained",color:"default",onClick:K,children:"Close"})})})]}),(0,A.jsx)(l.Z,{...e})]})}})})})}},4241:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var o=a(72791),i=a(79271),d=a(74569),n=a.n(d),r=a(16149),l=a(89743),s=a(2677),c=a(43360),x=a(34575),p=a(19658),h=a(61889),m=a(20890),u=a(15617),f=a.n(u),C=a(82159),b=(a(53063),a(3986)),g=a(29818),j=a(64554),Z=a(39157),y=a(13239),v=(a(58484),a(76897)),S=a(31052),k=a.n(S),w=a(5936),R=a(3395),O=a(872),P=a(31009),D=a(38996),A=a(5130),I=a(82271),B=a(41286),E=a(91903),N=a(12715),T=a(10111),L=a(35585),W=a(16346),F=a(5403),K=a(97911),G=a(80184);const _=o.forwardRef((function(e,t){return(0,G.jsx)(p.Z,{elevation:6,ref:t,variant:"filled",...e})}));const U=(0,i.EN)((function(e){let[t,a]=(0,o.useState)([]),[d,p]=(0,o.useState)([]);const[u,S]=(0,o.useState)(!1),[U,M]=(0,o.useState)([]),[Q,V]=(0,o.useState)(),[q,H]=(0,o.useState)([]);let[z,J]=(0,o.useState)(""),[X,Y]=(0,o.useState)("");const $=n().create({baseURL:"http://35.78.68.113:8072"});let[ee,te]=(0,o.useState)({}),[ae,oe]=(0,o.useState)({}),[ie,de]=(0,o.useState)(!1),[ne,re]=(0,o.useState)(!1),le=(e,t)=>{te({...ee,[e]:t}),ae[e]&&oe({...ae,[e]:null})};const[se,ce]=(0,o.useState)(0),[xe,pe]=(0,o.useState)(0),[he,me]=(0,o.useState)("Choose...");(0,o.useEffect)((()=>{se>0&&0===xe?me("Copex"):xe>0&&0===se?me("Opex"):se>0&&xe>0?me("Capex+Opex"):xe&&""!==xe||se&&""!==se||me(ee.capexopex)}),[se,xe]);const ue={Add:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(w.Z,{...e,ref:t}))),Check:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(O.Z,{...e,ref:t}))),Clear:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(A.Z,{...e,ref:t}))),Delete:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(I.Z,{...e,ref:t}))),DetailPanel:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(D.Z,{...e,ref:t}))),Edit:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(B.Z,{...e,ref:t}))),Export:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(W.Z,{...e,ref:t}))),Filter:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(E.Z,{...e,ref:t}))),FirstPage:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(N.Z,{...e,ref:t}))),LastPage:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(T.Z,{...e,ref:t}))),NextPage:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(D.Z,{...e,ref:t}))),PreviousPage:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(P.Z,{...e,ref:t}))),ResetSearch:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(A.Z,{...e,ref:t}))),Search:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(F.Z,{...e,ref:t}))),SortArrow:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(R.Z,{...e,ref:t}))),ThirdStateCheck:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(L.Z,{...e,ref:t}))),ViewColumn:(0,o.forwardRef)(((e,t)=>(0,G.jsx)(K.Z,{...e,ref:t})))};se>0&&0===xe&&(document.getElementById("txtCapOpe").disabled=!0,document.getElementById("txtOpeBud").disabled=!0,document.getElementById("txtOpeAmo").disabled=!0),0===se&&xe>0&&(document.getElementById("txtCapOpe").disabled=!0,document.getElementById("txtCapBud").disabled=!0,document.getElementById("txtCapAmo").disabled=!0),se>0&&xe>0&&(document.getElementById("txtCapOpe").disabled=!0),"Copex"===ee.capexopex&&(document.getElementById("txtOpeBud").disabled=!0,document.getElementById("txtOpeAmo").disabled=!0,document.getElementById("txtCapBud").disabled=!1,document.getElementById("txtCapAmo").disabled=!1),"Opex"===ee.capexopex&&(document.getElementById("txtOpeBud").disabled=!1,document.getElementById("txtOpeAmo").disabled=!1,document.getElementById("txtCapBud").disabled=!0,document.getElementById("txtCapAmo").disabled=!0),"Capex+Opex"===ee.capexopex&&(document.getElementById("txtOpeBud").disabled=!1,document.getElementById("txtOpeAmo").disabled=!1,document.getElementById("txtCapBud").disabled=!1,document.getElementById("txtCapAmo").disabled=!1);const fe=[{dataKey:"taskStatus",header:"Status"},{dataKey:"performedDate",header:"Performed Date"},{dataKey:"performedBy",header:"Performed by"},{dataKey:"comment",header:"Comment"}],Ce=[{header:"ERP Code",dataKey:"erpCode"},{header:"Rate Card Div",dataKey:"rateCardDiv"},{header:"Item Discreption",dataKey:"itemDiscreption"},{header:"UoM",dataKey:"itemUom"},{header:"Unit Rate",dataKey:"itemRate"},{header:"Quantity",dataKey:"itemQty"},{header:"Item Total",dataKey:"itemTotal"},{header:"Capex/Opex",dataKey:"capexopexLine"},{header:"Comment",dataKey:"itemComment"}],be=(0,i.k6)();(0,o.useEffect)((()=>{e.location.data?(a([{name:e.location.data.assignedMobitelOfficer.name}]),p([{companyName:e.location.data.assignedSubcon.companyName}]),te({taskRef:e.location.data.taskRef,siteID:e.location.data.siteID,siteName:e.location.data.siteName,actualTaskStartDate:e.location.data.taskHistory.find((e=>"Task commenced"===e.taskStatus)).performedDate.split("T")[0],actualTaskCompletedDate:e.location.data.taskHistory.find((e=>"Task completed"===e.taskStatus)).performedDate.split("T")[0],taskAssignedDiv:e.location.data.taskAssignedDiv,assignedMobitelOfficer:e.location.data.assignedMobitelOfficer.name,workScope:e.location.data.workScope,assignedSubcon:e.location.data.assignedSubcon.companyName,verificationOneId:e.location.data.approvalPath[0].name,verificationTwoId:e.location.data.approvalPath[1].name,approvalId:e.location.data.approvalPath[2].name}),M(e.location.data.boqs[e.location.data.boqs.length-1].boqData),V(e.location.data.boqs[e.location.data.boqs.length-1].totalCost),H(e.location.data.taskHistory.filter((e=>"BOQ Verified_0"===e.taskStatus||"BOQ Verified_1"===e.taskStatus||"BOQ Verified_2"===e.taskStatus||"BOQ Approved"===e.taskStatus||"BOQ submitted"===e.taskStatus||"BOQ Rejected"===e.taskStatus))),ce(e.location.data.boqs[e.location.data.boqs.length-1].CapexPrAmount),pe(e.location.data.boqs[e.location.data.boqs.length-1].OpexPrAmount)):be.push("/raisePrTasks")}),[]);const ge=(e,t)=>{"clickaway"!==t&&de(!1)};return(0,G.jsxs)("div",{children:[(0,G.jsxs)("div",{className:"content-wrapper",children:[(0,G.jsx)("div",{className:"content-header",children:(0,G.jsx)("section",{className:"content-header",children:(0,G.jsx)("div",{className:"container-fluid",children:(0,G.jsx)("div",{className:"row mb-2",children:(0,G.jsx)("div",{className:"col-sm-6",children:(0,G.jsxs)("h1",{children:["Raise PR Task ID: ",ee.taskRef," "]})})})})})}),(0,G.jsx)("section",{className:"content",children:(0,G.jsxs)("div",{className:"container-fluid",children:[(0,G.jsxs)(r.Z,{children:[(0,G.jsxs)(l.Z,{children:[(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Site ID"}),(0,G.jsx)(r.Z.Control,{disabled:!0,value:ee.siteID,className:"col-md-9",type:"text",placeholder:"Enter site ID",isInvalid:!!ae.siteID}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.siteID})]}),(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Site Name"}),(0,G.jsx)(r.Z.Control,{disabled:!0,value:ee.siteName,type:"text",placeholder:"Enter site Name",isInvalid:!!ae.siteName}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.siteName})]}),(0,G.jsx)(r.Z.Group,{as:s.Z,controlId:""})]}),(0,G.jsxs)(l.Z,{className:"mb-3",children:[(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Actual Work Commencement Date"}),(0,G.jsx)(r.Z.Control,{disabled:!0,value:ee.actualTaskStartDate,className:"col-md-9",type:"date",isInvalid:!!ae.actualTaskStartDate}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.actualTaskStartDate})]}),(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Actual Work Completed Date"}),(0,G.jsx)(r.Z.Control,{disabled:!0,value:ee.actualTaskCompletedDate,className:"col-md-9",type:"date",isInvalid:!!ae.actualTaskCompletedDate}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.actualTaskCompletedDate})]}),(0,G.jsx)(r.Z.Group,{as:s.Z})]}),(0,G.jsxs)(l.Z,{children:[(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Task Assigned Division"}),(0,G.jsxs)(r.Z.Control,{disabled:!0,value:ee.taskAssignedDiv,as:"select",defaultValue:"Choose...",isInvalid:!!ae.taskAssignedDiv,children:[(0,G.jsx)("option",{children:"Choose..."}),(0,G.jsx)("option",{children:"Project_Radio"}),(0,G.jsx)("option",{children:"Project_Core"}),(0,G.jsx)("option",{children:"Project_TX"}),(0,G.jsx)("option",{children:"Project_IBS"}),(0,G.jsx)("option",{children:"Project_WiFi"})]}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.taskAssignedDiv})]}),(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Assigned Mobitel Officer"}),(0,G.jsxs)(r.Z.Control,{disabled:!0,as:"select",value:ee.assignedMobitelOfficer,defaultValue:"Choose...",isInvalid:!!ae.assignedMobitelOfficer,children:[(0,G.jsx)("option",{children:"Choose..."}),t.map((e=>(0,G.jsx)("option",{value:e._id,children:e.name})))]}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.assignedMobitelOfficer})]}),(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Assigned subcontractor"}),(0,G.jsxs)(r.Z.Control,{disabled:!0,value:ee.assignedSubcon,as:"select",defaultValue:"Choose...",isInvalid:!!ae.assignedSubcon,children:[(0,G.jsx)("option",{children:"Choose..."}),d.map((e=>(0,G.jsx)("option",{value:e._id,children:e.companyName})))]}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.assignedSubcon})]})]}),(0,G.jsx)(l.Z,{children:(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"High level work scope"}),(0,G.jsx)(r.Z.Control,{disabled:!0,value:ee.workScope,as:"textarea",rows:2,placeholder:"",isInvalid:!!ae.workScope}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.workScope})]})})]}),(0,G.jsx)(f(),{title:"Raise PR-"+ee.siteID+"_"+ee.taskRef,data:U,columns:[{title:"ERP Code",field:"erpCode",filtering:!1,editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Rate Card Div",field:"rateCardDiv",editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Item Discreption",field:"itemDiscreption",filtering:!1,editable:!1,cellStyle:{width:300,minWidth:300,maxWidth:300,height:1}},{title:"UoM",field:"itemUom",editable:!1,cellStyle:{width:50,minWidth:50,maxWidth:50,height:1}},{title:"Unit Rate",field:"itemRate",editable:!1,filtering:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Quantity",field:"itemQty",editable:!1,cellStyle:{width:50,minWidth:50,maxWidth:50,height:1}},{title:"Item Total",field:"itemTotal",type:"currency",currencySetting:{currencyCode:"LKR"},editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Capex/Opex",field:"capexopexLine",cellStyle:{width:100,minWidth:100,maxWidth:100,height:1},editable:!1},{title:"Comment",field:"itemComment",editable:"onUpdate",cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}}],icons:ue,editable:{onRowUpdate:(e,t)=>new Promise(((a,o)=>{const i=t.tableData.id,d=[...U];e.itemTotal=e.itemRate*e.itemQty,d[i]=e,setTimeout((()=>{M(d),a()}),2e3)}))},options:{exportButton:!0,pageSizeOptions:[U.length,5,10,20],paginationType:"stepped",showTextRowsSelected:!1,actionsColumnIndex:-1,filtering:!1,tableLayout:"auto",rowStyle:{backgroundColor:"#EEE"},headerStyle:{backgroundColor:"#01579b",color:"#FFF"},exportPdf:(e,t)=>{const a=new v.jsPDF({orientation:"landscape"});k()(a,{head:[["Task ID : "+ee.taskRef]]}),k()(a,{theme:"grid",head:[["Site ID","Site Name","Assigned Mobitel Officer","Assigned Subcon","Capex Amount","Opex Amount","Total Value"]],body:[[ee.siteID,ee.siteName,ee.assignedMobitelOfficer,ee.assignedSubcon,se&&""!==se?se.toLocaleString("en-US",{style:"currency",currency:"LKR"}):"Not Defined",xe&&""!==xe?xe.toLocaleString("en-US",{style:"currency",currency:"LKR"}):"Not Defined",Q.toLocaleString("en-US",{style:"currency",currency:"LKR"})]]}),k()(a,{head:[["BOQ"]]}),k()(a,{theme:"grid",columnStyles:{itemRate:{halign:"right"},itemTotal:{halign:"right"}},columns:Ce,body:t}),k()(a,{head:[["Approval Hirarchy"]]}),k()(a,{theme:"grid",columns:fe,body:q.map((e=>({...e,performedBy:e.performedBy.name})))});const o=new Date;"".concat(o.getFullYear()).concat((o.getMonth()+1).toString().padStart(2,"0")).concat(o.getDate().toString().padStart(2,"0"));a.save("BOQ_".concat(ee.taskRef,"_","".concat((new Date).getFullYear()).concat(((new Date).getMonth()+1).toString().padStart(2,"0")).concat((new Date).getDate().toString().padStart(2,"0")),".pdf"))}},components:{Pagination:e=>(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(h.ZP,{container:!0,style:{pading:300,background:"#f5f5f5"},children:[(0,G.jsxs)(h.ZP,{sm:9,item:!0,children:[(0,G.jsx)(m.Z,{align:"right",variant:"subtitle1",children:"Capex Amount"}),(0,G.jsx)(m.Z,{align:"right",variant:"subtitle1",children:"Opex Amount"}),(0,G.jsx)(m.Z,{align:"right",fontWeight:"bold",variant:"subtitle1",children:"Total Amount"})]}),(0,G.jsxs)(h.ZP,{sm:3,align:"center",children:[(0,G.jsx)(m.Z,{align:"right",variant:"subtitle1",children:se?"LKR "+parseFloat(se):"LKR 0.00"}),(0,G.jsx)(m.Z,{align:"right",variant:"subtitle1",children:xe?"LKR "+parseFloat(xe):"LKR 0.00"}),(0,G.jsx)(m.Z,{align:"right",fontWeight:"bold",variant:"subtitle1",children:"LKR "+Q})]})]}),(0,G.jsx)(C.Z,{...e})]})}}),(0,G.jsx)("br",{}),(0,G.jsx)(l.Z,{children:(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Approval History"}),(0,G.jsx)("div",{style:{height:250,width:"100%"},children:(0,G.jsx)(b._$r,{getRowId:e=>e._id,rows:q,columns:[{field:"taskStatus",headerName:"Status",width:250},{field:"performedDate",headerName:"Performed Date",width:200,valueGetter:e=>e.row.performedDate.split("T")[0]},{field:"performedBy",headerName:"Performed by",width:200,valueGetter:e=>e.row.performedBy.name},{field:"comment",headerName:"Comment",width:500}],pageSize:5,rowsPerPageOptions:[5],rowHeight:30,headerHeight:40})})]})}),(0,G.jsxs)(l.Z,{children:[(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"PR Number"}),(0,G.jsx)(r.Z.Control,{value:ee.PRnumber,onChange:e=>le("PRnumber",e.target.value),type:"text",rows:2,placeholder:"Enter PR Number",isInvalid:!!ae.PRnumber}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.PRnumber})]}),(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Capex or Opex"}),(0,G.jsxs)(r.Z.Control,{id:"txtCapOpe",value:he,onChange:e=>le("capexopex",e.target.value),as:"select",isInvalid:!!ae.capexopex,children:[(0,G.jsx)("option",{value:"",children:"Choose..."}),(0,G.jsx)("option",{value:"Copex",children:"Capex"}),(0,G.jsx)("option",{value:"Opex",children:"Opex"}),(0,G.jsx)("option",{value:"Capex+Opex",children:"Capex + Opex"})]}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.capexopex})]}),(0,G.jsx)(r.Z.Group,{as:s.Z}),(0,G.jsx)(r.Z.Group,{as:s.Z})]}),(0,G.jsxs)(l.Z,{children:[(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Capex Budget Code"}),(0,G.jsx)(r.Z.Control,{id:"txtCapBud",value:ee.budgetCodeCapex,onChange:e=>le("budgetCodeCapex",e.target.value),type:"text",rows:1,placeholder:"Enter Capex Budget Code",isInvalid:!!ae.budgetCodeCapex}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.budgetCodeCapex})]}),(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Capex Amount"}),(0,G.jsx)(r.Z.Control,{id:"txtCapAmo",value:se,onChange:e=>le("CapexPrAmount",e.target.value),type:"text",rows:1,placeholder:"Enter Capex Amount",isInvalid:!!ae.CapexPrAmount}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.CapexPrAmount})]}),(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Opex Budget Code"}),(0,G.jsx)(r.Z.Control,{id:"txtOpeBud",value:ee.budgetCodeOpex,onChange:e=>le("budgetCodeOpex",e.target.value),type:"text",rows:1,placeholder:"Enter Opex Budget Code",isInvalid:!!ae.budgetCodeOpex}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.budgetCodeOpex})]}),(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Opex Amount"}),(0,G.jsx)(r.Z.Control,{id:"txtOpeAmo",value:xe,onChange:e=>le("OpexPrAmount",e.target.value),type:"text",rows:1,placeholder:"Enter Opex Amount",isInvalid:!!ae.OpexPrAmount}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.OpexPrAmount})]})]}),(0,G.jsx)(l.Z,{children:(0,G.jsxs)(r.Z.Group,{as:s.Z,children:[(0,G.jsx)(r.Z.Label,{children:"Comments"}),(0,G.jsx)(r.Z.Control,{onChange:e=>le("comment",e.target.value),as:"textarea",rows:2,value:ee.comment,placeholder:"Enter your comments",isInvalid:!!ae.comment}),(0,G.jsx)(r.Z.Control.Feedback,{type:"invalid",children:ae.comment})]})}),(0,G.jsx)(c.Z,{variant:"primary",onClick:t=>{t.preventDefault();const a=(()=>{const{comment:e,PRnumber:t,capexopex:a,budgetCodeCapex:o,budgetCodeOpex:i}=ee,d={};return e&&""!==e||(d.comment="cannot be blank!"),t&&""!==t||(d.PRnumber="cannot be blank!"),"Copex"!==he||o&&""!==o||(d.budgetCodeCapex="cannot be blank!"),"Opex"!==he||i&&""!==i||(d.budgetCodeOpex="cannot be blank!"),"Capex+Opex"!==he||o&&""!==o||(d.budgetCodeCapex="cannot be blank!"),"Capex+Opex"!==he||i&&""!==i||(d.budgetCodeOpex="cannot be blank!"),ee.capexopex&&""!==ee.capexopex||he&&""!==he||(d.capexopex="cannot be blank!"),"Copex"!==ee.capexopex||o&&""!==o||(d.budgetCodeCapex="cannot be blank!"),"Opex"!==ee.capexopex||i&&""!==i||(d.budgetCodeOpex="cannot be blank!"),"Capex+Opex"!==ee.capexopex||o&&""!==o||(d.budgetCodeCapex="cannot be blank!"),"Capex+Opex"!==ee.capexopex||i&&""!==i||(d.budgetCodeOpex="cannot be blank!"),"Opex"===ee.capexopex&&Number(ee.OpexPrAmount)!==Q&&(d.OpexPrAmount="Check Opex PR Amount!"),"Copex"===ee.capexopex&&Number(ee.CapexPrAmount)!==Q&&(d.CapexPrAmount="Check Capex PR Amount!"),"Capex+Opex"===ee.capexopex&&Number(ee.CapexPrAmount)+Number(ee.OpexPrAmount)!==Q&&(d.CapexPrAmount="Check Capex & Opex PR Amounts!"),"Capex+Opex"===ee.capexopex&&Number(ee.CapexPrAmount)+Number(ee.OpexPrAmount)!==Q&&(d.OpexPrAmount="Check Capex & Opex PR Amounts!"),d})();if(Object.keys(a).length>0)oe(a);else{let t={taskStatus:"PR Raised",PRnumber:ee.PRnumber,capexopex:ee.capexopex||he,budgetCodeCapex:ee.budgetCodeCapex,budgetCodeOpex:ee.budgetCodeOpex,CapexPrAmount:ee.CapexPrAmount||se,OpexPrAmount:ee.OpexPrAmount||xe,totalCost:Q};$.put("projonline/update/"+e.location.data.row._id,{totalCost:Q,boqData:U,taskObject:t,taskHistory:{taskStatus:t.taskStatus,comment:ee.comment}},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((t=>{re(!0),setTimeout((()=>{Y(t.data.alart),J(t.data.severity),de(!0)}),2e3),setTimeout((()=>{re(!1),de(!1),e.history.push({pathname:"/raisePrTasks"})}),2e3)})).catch((e=>{console.log(e)}))}},children:"PR Raised"})]})})]}),(0,G.jsx)(x.Z,{open:ie,autoHideDuration:6e3,onClose:ge,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,G.jsx)(_,{onClose:ge,severity:z,sx:{width:"100%"},children:X})}),(0,G.jsx)(g.Z,{open:ne,onClose:ge,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,G.jsx)(Z.Z,{children:(0,G.jsx)(j.Z,{sx:{display:"flex"},children:(0,G.jsx)(y.Z,{})})})})]})}))},55382:()=>{},72095:()=>{},61219:()=>{}}]);
//# sourceMappingURL=7028.c161e163.chunk.js.map