"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8482],{88482:(e,a,r)=>{r.r(a),r.d(a,{default:()=>f});var s=r(72791),t=r(79271),n=r(74569),o=r.n(n),l=r(3986),d=(r(2468),r(43360)),c=r(39474),i=r(16149),h=r(89743),u=r(2677),x=r(34575),j=r(19658),m=r(29818),p=r(64554),Z=r(39157),g=r(13239),v=r(80184);const w=s.forwardRef((function(e,a){return(0,v.jsx)(j.Z,{elevation:6,ref:a,variant:"filled",...e})}));const f=(0,t.EN)((function(){let[e,a]=(0,s.useState)([]),[r,t]=(0,s.useState)([]),[n,j]=(0,s.useState)([]),[f,N]=(0,s.useState)([]),[S,k]=(0,s.useState)(!1),[y,C]=(0,s.useState)(""),[b,I]=(0,s.useState)(""),[H,O]=(0,s.useState)({}),[P,R]=(0,s.useState)(!1);const A=(e,a)=>{j({...n,[a]:e.target.value})},[L,T]=(0,s.useState)(!1),B=()=>T(!1),D=o().create({baseURL:"http://ec2-65-2-5-82.ap-south-1.compute.amazonaws.com/"});(0,s.useEffect)((()=>{G()}),[]);const G=()=>{R(!0),D.get("projonline/allhandoverchanges/approved",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{a(e.data),R(!1)})).catch((e=>{console.log(e)}))},q=(e,a)=>{"clickaway"!==a&&k(!1)},z=[{field:"taskRef",headerName:"TaskID",width:250},{field:"siteID",headerName:"SiteID",width:150},{field:"siteName",headerName:"Site Name",width:175},{field:"project",headerName:"Project",width:250},{field:"subProject",headerName:"Sub Project",width:250},{field:"Recently Approved Handover Changes",width:250,align:"center",renderCell:e=>(0,v.jsx)(d.Z,{variant:"primary",style:{width:100},onClick:()=>{return a=e.row,t(a),j(a.newProperties),N(a.headerProperties),void T(!0);var a},children:"Show"})}];return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"content-wrapper",children:[(0,v.jsx)("div",{className:"content-header",children:(0,v.jsx)("section",{className:"content-header",children:(0,v.jsx)("div",{className:"container-fluid",children:(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-sm-6",children:(0,v.jsx)("h1",{children:"Recently Approved Handover Changes"})})})})})}),(0,v.jsx)("div",{style:{height:610,width:"100%"},children:(0,v.jsx)(l._$r,{getRowId:e=>e._id,rows:e,columns:z,pageSize:15,rowsPerPageOptions:[15],rowHeight:30,headerHeight:40,components:{Toolbar:l.npt}})})]}),(0,v.jsxs)(c.Z,{show:L,onHide:B,size:"lg",animation:!1,children:[(0,v.jsx)(c.Z.Header,{closeButton:!0,children:(0,v.jsx)(c.Z.Title,{children:"Edit Handover"})}),(0,v.jsx)(c.Z.Body,{children:(0,v.jsxs)(i.Z,{onSubmit:B,children:[null===f||void 0===f?void 0:f.map(((e,a)=>a<3?(0,v.jsx)(h.Z,{children:(0,v.jsxs)(i.Z.Group,{className:"m-2",controlId:"refid",as:u.Z,children:[(0,v.jsx)(i.Z.Label,{children:e}),(0,v.jsx)(i.Z.Control,{className:"mr-1 ml-1",value:n[a],onChange:e=>A(e,a),type:"text",readOnly:!0})]})}):(0,v.jsx)(h.Z,{children:(0,v.jsxs)(i.Z.Group,{className:"m-2",controlId:"refid",as:u.Z,children:[(0,v.jsx)(i.Z.Label,{children:e}),(0,v.jsxs)("div",{className:"d-flex flex-row",children:[(0,v.jsx)(i.Z.Control,{className:"mr-1 ml-1",value:r.existingProperties[a],type:"text",readOnly:!0}),(0,v.jsx)(i.Z.Control,{className:"mr-1 ml-1 ".concat(r.existingProperties[a]!=n[a]?"text-danger":""),value:n[a],onChange:e=>A(e,a),type:"text",readOnly:!0})]})]})}))),r.taskStatus&&(0,v.jsx)(h.Z,{children:(0,v.jsxs)(i.Z.Group,{className:"m-3",controlId:"refid",as:u.Z,children:[(0,v.jsx)(i.Z.Label,{children:"Requested Status"}),(0,v.jsx)(i.Z.Control,{type:"text",rows:3,required:!0,value:r.taskStatus,readonly:!0})]})}),(0,v.jsx)(h.Z,{children:(0,v.jsxs)(i.Z.Group,{className:"m-3",controlId:"refid",as:u.Z,children:[(0,v.jsx)(i.Z.Label,{children:"Reason for the change request"}),(0,v.jsx)(i.Z.Control,{as:"textarea",rows:3,required:!0,value:r.comment,readonly:!0})]})}),(0,v.jsx)(h.Z,{children:(0,v.jsxs)(i.Z.Group,{className:"m-3",controlId:"refid",as:u.Z,children:[(0,v.jsx)(i.Z.Label,{children:"Approve Comment"}),(0,v.jsx)(i.Z.Control,{as:"textarea",rows:3,readonly:!0,value:r.approveComment})]})})]})}),(0,v.jsx)(c.Z.Footer,{children:(0,v.jsx)(d.Z,{variant:"primary",onClick:()=>{D.put("projonline/updatehandoverchanges/".concat(r._id),{status:"Change Acknowledged"},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{D.put("projonline/update/".concat(r.taskRefID),{taskObject:{},taskHistory:{taskStatus:"Change Acknowledged"}},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{k(!0),C("success"),I("Change Acknowledged"),T(!1),G()})).catch((e=>{console.log(e),k(!0),C("error"),I("Error occured")}))})).catch((e=>{console.log(e)}))},children:"Acknowledge"})})]}),(0,v.jsx)(x.Z,{open:S,autoHideDuration:6e3,onClose:q,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,v.jsx)(w,{onClose:q,severity:y,sx:{width:"100%"},children:b})}),(0,v.jsx)(m.Z,{open:P,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,v.jsx)(Z.Z,{children:(0,v.jsx)(p.Z,{sx:{display:"flex"},children:(0,v.jsx)(g.Z,{})})})})]})}))},2468:(e,a,r)=>{r.d(a,{Z:()=>s});const s={}}}]);
//# sourceMappingURL=8482.6bf9dd3a.chunk.js.map