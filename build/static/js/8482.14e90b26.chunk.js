"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8482],{88482:function(e,t,r){r.r(t);var n=r(4942),a=r(29439),s=r(1413),o=r(72791),l=r(79271),i=r(74569),c=r.n(i),d=r(3986),h=(r(2468),r(43360)),u=r(39474),x=r(16149),j=r(89743),Z=r(2677),p=r(34575),f=r(19658),m=r(29818),g=r(64554),v=r(39157),w=r(13239),N=r(80184),S=o.forwardRef((function(e,t){return(0,N.jsx)(f.Z,(0,s.Z)({elevation:6,ref:t,variant:"filled"},e))}));t.default=(0,l.EN)((function(){var e=(0,o.useState)([]),t=(0,a.Z)(e,2),r=t[0],l=t[1],i=(0,o.useState)([]),f=(0,a.Z)(i,2),k=f[0],y=f[1],C=(0,o.useState)([]),b=(0,a.Z)(C,2),I=b[0],H=b[1],O=(0,o.useState)([]),P=(0,a.Z)(O,2),R=P[0],A=P[1],L=(0,o.useState)(!1),T=(0,a.Z)(L,2),B=T[0],D=T[1],G=(0,o.useState)(""),q=(0,a.Z)(G,2),E=q[0],z=q[1],J=(0,o.useState)(""),_=(0,a.Z)(J,2),F=_[0],U=_[1],$=(0,o.useState)({}),K=(0,a.Z)($,2),M=(K[0],K[1],(0,o.useState)(!1)),Q=(0,a.Z)(M,2),V=Q[0],W=Q[1],X=function(e,t){H((0,s.Z)((0,s.Z)({},I),{},(0,n.Z)({},t,e.target.value)))},Y=(0,o.useState)(!1),ee=(0,a.Z)(Y,2),te=ee[0],re=ee[1],ne=function(){return re(!1)},ae=c().create({baseURL:"http://localhost:80/"});(0,o.useEffect)((function(){se()}),[]);var se=function(){W(!0),ae.get("projonline/allhandoverchanges/approved",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(e){l(e.data),W(!1)})).catch((function(e){console.log(e)}))},oe=function(e,t){"clickaway"!==t&&D(!1)},le=[{field:"taskRef",headerName:"TaskID",width:250},{field:"siteID",headerName:"SiteID",width:150},{field:"siteName",headerName:"Site Name",width:175},{field:"project",headerName:"Project",width:250},{field:"subProject",headerName:"Sub Project",width:250},{field:"Recently Approved Handover Changes",width:250,align:"center",renderCell:function(e){return(0,N.jsx)(h.Z,{variant:"primary",style:{width:100},onClick:function(){return t=e.row,y(t),H(t.newProperties),A(t.headerProperties),void re(!0);var t},children:"Show"})}}];return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"content-wrapper",children:[(0,N.jsx)("div",{className:"content-header",children:(0,N.jsx)("section",{className:"content-header",children:(0,N.jsx)("div",{className:"container-fluid",children:(0,N.jsx)("div",{className:"row mb-2",children:(0,N.jsx)("div",{className:"col-sm-6",children:(0,N.jsx)("h1",{children:"Recently Approved Handover Changes"})})})})})}),(0,N.jsx)("div",{style:{height:610,width:"100%"},children:(0,N.jsx)(d._$r,{getRowId:function(e){return e._id},rows:r,columns:le,pageSize:15,rowsPerPageOptions:[15],rowHeight:30,headerHeight:40,components:{Toolbar:d.npt}})})]}),(0,N.jsxs)(u.Z,{show:te,onHide:ne,size:"lg",animation:!1,children:[(0,N.jsx)(u.Z.Header,{closeButton:!0,children:(0,N.jsx)(u.Z.Title,{children:"Edit Handover"})}),(0,N.jsx)(u.Z.Body,{children:(0,N.jsxs)(x.Z,{onSubmit:ne,children:[null===R||void 0===R?void 0:R.map((function(e,t){return t<3?(0,N.jsx)(j.Z,{children:(0,N.jsxs)(x.Z.Group,{className:"m-2",controlId:"refid",as:Z.Z,children:[(0,N.jsx)(x.Z.Label,{children:e}),(0,N.jsx)(x.Z.Control,{className:"mr-1 ml-1",value:I[t],onChange:function(e){return X(e,t)},type:"text",readOnly:!0})]})}):(0,N.jsx)(j.Z,{children:(0,N.jsxs)(x.Z.Group,{className:"m-2",controlId:"refid",as:Z.Z,children:[(0,N.jsx)(x.Z.Label,{children:e}),(0,N.jsxs)("div",{className:"d-flex flex-row",children:[(0,N.jsx)(x.Z.Control,{className:"mr-1 ml-1",value:k.existingProperties[t],type:"text",readOnly:!0}),(0,N.jsx)(x.Z.Control,{className:"mr-1 ml-1 ".concat(k.existingProperties[t]!=I[t]?"text-danger":""),value:I[t],onChange:function(e){return X(e,t)},type:"text",readOnly:!0})]})]})})})),k.taskStatus&&(0,N.jsx)(j.Z,{children:(0,N.jsxs)(x.Z.Group,{className:"m-3",controlId:"refid",as:Z.Z,children:[(0,N.jsx)(x.Z.Label,{children:"Requested Status"}),(0,N.jsx)(x.Z.Control,{type:"text",rows:3,required:!0,value:k.taskStatus,readonly:!0})]})}),(0,N.jsx)(j.Z,{children:(0,N.jsxs)(x.Z.Group,{className:"m-3",controlId:"refid",as:Z.Z,children:[(0,N.jsx)(x.Z.Label,{children:"Reason for the change request"}),(0,N.jsx)(x.Z.Control,{as:"textarea",rows:3,required:!0,value:k.comment,readonly:!0})]})}),(0,N.jsx)(j.Z,{children:(0,N.jsxs)(x.Z.Group,{className:"m-3",controlId:"refid",as:Z.Z,children:[(0,N.jsx)(x.Z.Label,{children:"Approve Comment"}),(0,N.jsx)(x.Z.Control,{as:"textarea",rows:3,readonly:!0,value:k.approveComment})]})})]})}),(0,N.jsx)(u.Z.Footer,{children:(0,N.jsx)(h.Z,{variant:"primary",onClick:function(){ae.put("projonline/updatehandoverchanges/".concat(k._id),{status:"Change Acknowledged"},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(e){ae.put("projonline/update/".concat(k.taskRefID),{taskObject:{},taskHistory:{taskStatus:"Change Acknowledged"}},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(e){D(!0),z("success"),U("Change Acknowledged"),re(!1),se()})).catch((function(e){console.log(e),D(!0),z("error"),U("Error occured")}))})).catch((function(e){console.log(e)}))},children:"Acknowledge"})})]}),(0,N.jsx)(p.Z,{open:B,autoHideDuration:6e3,onClose:oe,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,N.jsx)(S,{onClose:oe,severity:E,sx:{width:"100%"},children:F})}),(0,N.jsx)(m.Z,{open:V,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,N.jsx)(v.Z,{children:(0,N.jsx)(g.Z,{sx:{display:"flex"},children:(0,N.jsx)(w.Z,{})})})})]})}))},2468:function(){}}]);
//# sourceMappingURL=8482.14e90b26.chunk.js.map