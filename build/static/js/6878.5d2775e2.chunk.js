(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6878],{60743:function(e,a,o){"use strict";o.r(a);var n=o(4942),i=o(29439),t=o(1413),s=o(72791),r=o(79271),l=o(74569),c=o.n(l),d=o(89743),u=o(16149),h=o(2677),m=o(43360),p=o(34575),v=o(19658),j=(o(58484),o(97473),o(64554)),x=o(39157),b=o(13239),C=o(29818),Z=o(80184),f=s.forwardRef((function(e,a){return(0,Z.jsx)(v.Z,(0,t.Z)({elevation:6,ref:a,variant:"filled"},e))}));a.default=(0,r.EN)((function(e){var a=(0,s.useState)([]),o=(0,i.Z)(a,2),r=o[0],l=o[1],v=(0,s.useState)([]),y=(0,i.Z)(v,2),g=y[0],w=y[1],N=(0,s.useState)(""),k=(0,i.Z)(N,2),P=k[0],_=k[1],S=(0,s.useState)(""),T=(0,i.Z)(S,2),F=T[0],I=T[1],O=c().create({baseURL:"http://localhost:80/"}),D=(0,s.useState)({}),A=(0,i.Z)(D,2),B=A[0],L=A[1],M=(0,s.useState)({}),G=(0,i.Z)(M,2),R=G[0],V=G[1],U=(0,s.useState)(!1),E=(0,i.Z)(U,2),H=E[0],J=E[1],W=(0,s.useState)(!1),X=(0,i.Z)(W,2),z=X[0],q=X[1],K=function(e,a){L((0,t.Z)((0,t.Z)({},B),{},(0,n.Z)({},e,a))),R[e]&&V((0,t.Z)((0,t.Z)({},R),{},(0,n.Z)({},e,null)))};(0,s.useEffect)((function(){O.get("projonline/users",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(a){if(l(a.data.users.filter((function(e){return"Mobitel"===e.company.companyName}))),w(a.data.companys),"Mobitel"===e.location.data.row.company.companyName){var o="",n="",i="";switch(e.location.data.row.approvalPath.length){case 0:o="1",n="1",i="1";break;case 1:o=e.location.data.row.approvalPath[0]._id,n="1",i="1";break;case 2:o=e.location.data.row.approvalPath[0]._id,n="2",i=e.location.data.row.approvalPath[1]._id;break;case 3:o=e.location.data.row.approvalPath[0]._id,n=e.location.data.row.approvalPath[1]._id,i=e.location.data.row.approvalPath[2]._id}L({name:e.location.data.row.name,email:e.location.data.row.email,company:e.location.data.row.company.companyName,userDiv:e.location.data.row.userDiv,mobileNo:e.location.data.row.mobileNo,username:e.location.data.row.username,adminRights:e.location.data.row.adminRights,activeStatus:e.location.data.row.activeStatus,userCanAssignForTask:e.location.data.row.userCanAssignForTask,visbilityBasedOn:e.location.data.row.visbilityBasedOn,projectCoordinator:e.location.data.row.projectCoordinator,isProjectCoordinator:e.location.data.row.isProjectCoordinator,verificationOneId:o,verificationTwoId:n,approvalId:i})}else L({name:e.location.data.row.name,email:e.location.data.row.email,company:e.location.data.row.company.companyName,userDiv:e.location.data.row.userDiv,mobileNo:e.location.data.row.mobileNo,username:e.location.data.row.username,adminRights:e.location.data.row.adminRights,activeStatus:e.location.data.row.activeStatus,userCanAssignForTask:e.location.data.row.userCanAssignForTask,visbilityBasedOn:e.location.data.row.visbilityBasedOn,projectCoordinator:e.location.data.row.projectCoordinator,isProjectCoordinator:e.location.data.row.isProjectCoordinator})})).catch((function(e){console.log(e)}))}),[]);var Q=function(e,a){"clickaway"!==a&&J(!1)};return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{className:"content-wrapper",children:[(0,Z.jsx)("div",{className:"content-header",children:(0,Z.jsx)("section",{className:"content-header",children:(0,Z.jsx)("div",{className:"container-fluid",children:(0,Z.jsx)("div",{className:"row mb-2",children:(0,Z.jsx)("div",{className:"col-sm-6",children:(0,Z.jsx)("h1",{children:"Update User Details"})})})})})}),(0,Z.jsx)("section",{className:"content",children:(0,Z.jsx)("div",{className:"container-fluid",children:(0,Z.jsxs)("form",{onSubmit:function(a){a.preventDefault();var o={},n=function(){var e=B.email,a=B.company,o=(B.projectCoordinator,B.userDiv),n=B.visbilityBasedOn,i=B.mobileNo,t=(B.verificationOne,B.verificationTwo,B.approval,{});return"Mobitel"===a&&"Choose..."===o&&(t.userDiv="Choose a division!"),"Mobitel"===a&&"Choose..."===n&&(t.visbilityBasedOn="Choose a option!"),e&&""!==e||(t.email="cannot be blank!"),i&&""!==i||(t.mobileNo="cannot be blank!"),t}();if(Object.keys(n).length>0)V(n);else{if("Mobitel"===B.company){var i=[B.verificationOneId,B.verificationTwoId,B.approvalId].filter((function(e){return"1"!==e})).filter((function(e){return"2"!==e}));o={name:B.name,email:B.email,company:g.find((function(e){return e.companyName===B.company}))._id,userDiv:B.userDiv,mobileNo:B.mobileNo,username:B.username,adminRights:B.adminRights,activeStatus:B.activeStatus,userCanAssignForTask:B.userCanAssignForTask,visbilityBasedOn:B.visbilityBasedOn,projectCoordinator:"1"==B.projectCoordinator?null:B.projectCoordinator,isProjectCoordinator:B.isProjectCoordinator,approvalPath:i}}else o={name:B.name,email:B.email,company:g.find((function(e){return e.companyName===B.company}))._id,userDiv:B.userDiv,mobileNo:B.mobileNo,username:B.username,activeStatus:B.activeStatus};O.put("projonline/user/"+e.location.data.row._id,o,{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(a){q(!0),setTimeout((function(){_(a.data.msg),I(a.data.variant),J(!0)}),2e3),setTimeout((function(){q(!1),J(!1),e.history.push({pathname:"/updateUser"})}),5e3)})).catch((function(e){console.log(e)}))}},enctype:"multipart/form-data",children:[(0,Z.jsxs)(d.Z,{className:"mb-3",children:[(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Name"}),(0,Z.jsx)(u.Z.Control,{onChange:function(e){return K("name",e.target.value)},value:B.name,className:"col-md-9",type:"text",isInvalid:!!R.name,disabled:!0}),(0,Z.jsx)(u.Z.Control.Feedback,{type:"invalid",children:R.name})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Username"}),(0,Z.jsx)(u.Z.Control,{onChange:function(e){return K("username",e.target.value)},value:B.username,className:"col-md-9",type:"text",isInvalid:!!R.username,disabled:!0}),(0,Z.jsx)(u.Z.Control.Feedback,{type:"invalid",children:R.username})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Email"}),(0,Z.jsx)(u.Z.Control,{onChange:function(e){return K("email",e.target.value)},value:B.email,className:"col-md-9",type:"text",isInvalid:!!R.email}),(0,Z.jsx)(u.Z.Control.Feedback,{type:"invalid",children:R.email})]})]}),(0,Z.jsxs)(d.Z,{className:"mb-3",children:[(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Company"}),(0,Z.jsx)(u.Z.Control,{onChange:function(e){return K("company",e.target.value)},value:B.company,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!R.company,children:g.map((function(e){return(0,Z.jsx)("option",{value:e.companyName,children:e.companyName})}))}),(0,Z.jsx)(u.Z.Control.Feedback,{type:"invalid",children:R.company})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"User Division"}),(0,Z.jsxs)(u.Z.Control,{onChange:function(e){return K("userDiv",e.target.value)},value:B.userDiv,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!R.userDiv,disabled:"Mobitel"!==B.company,children:[(0,Z.jsx)("option",{value:"Choose...",children:"Choose..."}),(0,Z.jsx)("option",{children:"Planning_Radio"}),(0,Z.jsx)("option",{children:"Planning_Core"}),(0,Z.jsx)("option",{children:"Planning_TX"}),(0,Z.jsx)("option",{children:"Planning_IBS"}),(0,Z.jsx)("option",{children:"Planning_WiFi"}),(0,Z.jsx)("option",{children:"Project_Radio"}),(0,Z.jsx)("option",{children:"Project_Core"}),(0,Z.jsx)("option",{children:"Project_TX"}),(0,Z.jsx)("option",{children:"Project_IBS"}),(0,Z.jsx)("option",{children:"Project_WiFi"})]}),(0,Z.jsx)(u.Z.Control.Feedback,{type:"invalid",children:R.userDiv})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Mobile No"}),(0,Z.jsx)(u.Z.Control,{onChange:function(e){return K("mobileNo",e.target.value)},value:B.mobileNo,className:"col-md-9",type:"number",isInvalid:!!R.mobileNo}),(0,Z.jsx)(u.Z.Control.Feedback,{type:"invalid",children:R.mobileNo})]})]}),(0,Z.jsxs)(d.Z,{className:"mb-3",children:[(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Visbility Based On"}),(0,Z.jsxs)(u.Z.Control,{onChange:function(e){return K("visbilityBasedOn",e.target.value)},value:B.visbilityBasedOn,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!R.visbilityBasedOn,disabled:"Mobitel"!==B.company,children:[(0,Z.jsx)("option",{children:"Choose..."}),(0,Z.jsx)("option",{value:"Admin",children:"Admin"}),(0,Z.jsx)("option",{value:"Planning",children:"Planning"}),(0,Z.jsx)("option",{value:"Project_Div_Head",children:"Project_Div_Head"}),(0,Z.jsx)("option",{value:"Project_PM",children:"Project_PM"}),(0,Z.jsx)("option",{value:"Project_TO",children:"Project_TO"}),(0,Z.jsx)("option",{value:"Project_Coor",children:"Project_Coor"}),(0,Z.jsx)("option",{value:"Subcon",children:"Subcon"})]}),(0,Z.jsx)(u.Z.Control.Feedback,{type:"invalid",children:R.visbilityBasedOn})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Project Coordinator"}),(0,Z.jsxs)(u.Z.Control,{as:"select",onChange:function(e){return K("projectCoordinator",e.target.value)},value:B.projectCoordinator,className:"col-md-9",defaultValue:"Choose...",isInvalid:!!R.visbilityBasedOn,disabled:"Mobitel"!==B.company,children:[(0,Z.jsx)("option",{value:"1",children:"Choose..."}),r.map((function(e){return(0,Z.jsx)("option",{value:e._id,children:e.name})}))]}),(0,Z.jsx)(u.Z.Control.Feedback,{type:"invalid",children:R.projectCoordinator})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Is Project Coordinator"}),(0,Z.jsx)(u.Z.Check,{onChange:function(e){return K("isProjectCoordinator",!B.isProjectCoordinator)},value:B.isProjectCoordinator,checked:B.isProjectCoordinator,className:"col-md-9",id:"custom-switch-4",type:"switch",disabled:"Mobitel"!==B.company})]})]}),(0,Z.jsxs)(d.Z,{className:"mb-3",children:[(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Admin Rights"}),(0,Z.jsx)(u.Z.Check,{onChange:function(e){return K("adminRights",!B.adminRights)},value:B.adminRights,checked:B.adminRights,className:"col-md-9",id:"custom-switch-1",type:"switch",disabled:"Mobitel"!==B.company})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Active Status"}),(0,Z.jsx)(u.Z.Check,{onChange:function(e){return K("activeStatus",!B.activeStatus)},value:B.activeStatus,checked:B.activeStatus,className:"col-md-9",id:"custom-switch-2",type:"switch"})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"User Can Assign For Task"}),(0,Z.jsx)(u.Z.Check,{onChange:function(e){return K("userCanAssignForTask",!B.userCanAssignForTask)},value:B.userCanAssignForTask,checked:B.userCanAssignForTask,className:"col-md-9",id:"custom-switch-3",type:"switch",disabled:"Mobitel"!==B.company})]})]}),(0,Z.jsxs)(d.Z,{children:[(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Verification by (Level 1)"}),(0,Z.jsxs)(u.Z.Control,{as:"select",className:"col-md-9",onChange:function(e){return K("verificationOneId",e.target.value)},value:B.verificationOneId,defaultValue:"Choose...",disabled:"Mobitel"!==B.company||!1===B.userCanAssignForTask,children:[(0,Z.jsx)("option",{value:"1",children:"Choose.."}),r.map((function(e){return(0,Z.jsx)("option",{value:e._id,children:e.name})}))]})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Verification by (Level 2)"}),(0,Z.jsxs)(u.Z.Control,{as:"select",className:"col-md-9",onChange:function(e){return K("verificationTwoId",e.target.value)},value:B.verificationTwoId,defaultValue:"Choose...",disabled:"Mobitel"!==B.company||!1===B.userCanAssignForTask,children:[(0,Z.jsx)("option",{value:"1",children:"Choose.."}),(0,Z.jsx)("option",{value:"2",children:"Not Applicable"}),r.map((function(e){return(0,Z.jsx)("option",{value:e._id,children:e.name})}))]})]}),(0,Z.jsxs)(u.Z.Group,{as:h.Z,children:[(0,Z.jsx)(u.Z.Label,{children:"Approval by"}),(0,Z.jsxs)(u.Z.Control,{as:"select",className:"col-md-9",onChange:function(e){return K("approvalId",e.target.value)},value:B.approvalId,defaultValue:"Choose...",disabled:"Mobitel"!==B.company||!1===B.userCanAssignForTask,children:[(0,Z.jsx)("option",{value:"1",children:"Choose.."}),r.map((function(e){return(0,Z.jsx)("option",{value:e._id,children:e.name})}))]})]})]}),(0,Z.jsx)(m.Z,{variant:"primary",type:"submit",children:"Update User Details"})]})})})]}),(0,Z.jsx)(p.Z,{open:H,autoHideDuration:6e3,onClose:Q,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,Z.jsx)(f,{onClose:Q,severity:F,sx:{width:"100%"},children:P})}),(0,Z.jsx)(C.Z,{open:z,onClose:Q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,Z.jsx)(x.Z,{children:(0,Z.jsx)(j.Z,{sx:{display:"flex"},children:(0,Z.jsx)(b.Z,{})})})})]})}))},97473:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=6878.5d2775e2.chunk.js.map