(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7028],{53063:function(e,t,a){"use strict";a.d(t,{Z:function(){return N}});var n=a(1413),o=a(29439),r=a(83837),i=a(94026),d=a(1288),l=a(20269),s=a(26513),c=a(82159),u=a(72791),x=a(15617),p=a.n(x),m=a(63727),h=a(51859),f=a(74569),Z=a.n(f),C=a(5936),g=a(3395),b=a(872),j=a(31009),y=a(38996),v=a(5130),w=a(82271),S=a(41286),k=a(91903),O=a(12715),R=a(10111),P=a(35585),A=a(16346),D=a(5403),I=a(97911),B=a(80184),E=[];function N(e){var t=(0,u.useState)(E),a=(0,o.Z)(t,2),x=a[0],f=a[1],N=(0,u.useState)("all"),T=(0,o.Z)(N,2),L=T[0],F=T[1],W=e.openPopup,K=e.setOpenPopup,G=(0,u.useState)([]),_=(0,o.Z)(G,2),U=_[0],M=_[1],Q=Z().create({baseURL:"http://localhost:80/"});(0,u.useEffect)((function(){E=[],Q.get("projonline/allRateCards",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(t){console.log(t.data),t.data.filter((function(t){return t.rateCardSubcon._id===JSON.parse(localStorage.getItem("user")).company._id&&t.rateCardValidTo>=e.acceptedDate&&t.rateCardValidFrom<=e.acceptedDate})).forEach((function(e){e.rateCardItems.forEach((function(t){t.rateCardDiv=e.rateCardDiv,E.push(t)}))}))})).catch((function(e){console.log(e)}))}),[]);var V={Add:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(C.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),Check:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(b.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),Clear:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(v.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),Delete:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(w.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),DetailPanel:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(y.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),Edit:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(S.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),Export:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(A.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),Filter:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(k.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),FirstPage:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(O.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),LastPage:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(R.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),NextPage:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(y.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),PreviousPage:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(j.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),ResetSearch:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(v.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),Search:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(D.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),SortArrow:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(g.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),ThirdStateCheck:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(P.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))})),ViewColumn:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(I.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t}))}))},q=function(){Array.isArray(U)&&U.length&&e.callBk(x.filter((function(e){return U.includes(e)}))),K(!1);var t=E.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{tableData:{checked:!1}})}));f(t),M([])},H=function(){K(!1);var e=E.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{tableData:{checked:!1}})}));f(e),M([])};return(0,u.useEffect)((function(){f("all"===L?E:E.filter((function(e){return e.rateCard===L})))}),[L]),(0,B.jsx)(r.Z,{open:W,fullWidth:!0,maxWidth:"lg",children:(0,B.jsx)(i.Z,{children:(0,B.jsx)(p(),{title:"BOQ Line Items",columns:[{title:"ERP Code",field:"erpCode",cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Rate Card Div",field:"rateCardDiv",cellStyle:{width:150,minWidth:150,maxWidth:150,height:1}},{title:"Item Discreption",field:"itemDiscreption",cellStyle:{width:400,minWidth:400,maxWidth:400,height:1}},{title:"UoM",field:"itemUom",cellStyle:{width:150,minWidth:150,maxWidth:150,height:1}},{title:"Unit Rate",field:"itemRate",type:"currency",currencySetting:{currencyCode:"LKR"},cellStyle:{width:200,minWidth:200,maxWidth:200,height:1}}],data:x,icons:V,onSelectionChange:function(e){return M(e)},options:{exportButton:!0,pageSizeOptions:[5,10,20],paginationType:"stepped",showTextRowsSelected:!1,actionsColumnIndex:-1,filtering:!0,selection:!0,tableLayout:"auto",selectionProps:{},rowStyle:{backgroundColor:"#EEE"},headerStyle:{backgroundColor:"#01579b",color:"#FFF"}},actions:[{icon:function(){return(0,B.jsxs)(m.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:L,onChange:function(e){return F(e.target.value)},style:{width:100},children:[(0,B.jsx)(h.Z,{value:"all",children:(0,B.jsx)("em",{children:"All"})}),(0,B.jsx)(h.Z,{value:"TX",children:"TX"}),(0,B.jsx)(h.Z,{value:"IBS",children:"IBS"}),(0,B.jsx)(h.Z,{value:"BTS",children:"BTS"})]})},tooltip:"Select Rate Card",isFreeAction:!0}],components:{Pagination:function(e){return(0,B.jsxs)("div",{children:[(0,B.jsxs)(d.Z,{container:!0,style:{pading:15,background:"#f5f5f5"},children:[(0,B.jsx)(d.Z,{sm:11,align:"right",item:!0,children:(0,B.jsx)(l.Z,{children:(0,B.jsx)(s.Z,{variant:"contained",type:"submit",color:"primary",onClick:q,children:"Submit"})})}),(0,B.jsx)(d.Z,{sm:1,align:"center",item:!0,children:(0,B.jsx)(l.Z,{children:(0,B.jsx)(s.Z,{variant:"contained",color:"default",onClick:H,children:"Close"})})})]}),(0,B.jsx)(c.Z,(0,n.Z)({},e))]})}}})})})}},4241:function(e,t,a){"use strict";a.r(t);var n=a(93433),o=a(4942),r=a(29439),i=a(1413),d=a(72791),l=a(79271),s=a(74569),c=a.n(s),u=a(16149),x=a(89743),p=a(2677),m=a(43360),h=a(34575),f=a(19658),Z=a(61889),C=a(20890),g=a(15617),b=a.n(g),j=a(82159),y=(a(53063),a(3986)),v=a(29818),w=a(64554),S=a(39157),k=a(13239),O=(a(58484),a(76897)),R=a(31052),P=a.n(R),A=a(5936),D=a(3395),I=a(872),B=a(31009),E=a(38996),N=a(5130),T=a(82271),L=a(41286),F=a(91903),W=a(12715),K=a(10111),G=a(35585),_=a(16346),U=a(5403),M=a(97911),Q=a(80184),V=d.forwardRef((function(e,t){return(0,Q.jsx)(f.Z,(0,i.Z)({elevation:6,ref:t,variant:"filled"},e))}));t.default=(0,l.EN)((function(e){var t=(0,d.useState)([]),a=(0,r.Z)(t,2),s=a[0],f=a[1],g=(0,d.useState)([]),R=(0,r.Z)(g,2),q=R[0],H=R[1],z=(0,d.useState)(!1),J=(0,r.Z)(z,2),X=(J[0],J[1],(0,d.useState)([])),Y=(0,r.Z)(X,2),$=Y[0],ee=Y[1],te=(0,d.useState)(),ae=(0,r.Z)(te,2),ne=ae[0],oe=ae[1],re=(0,d.useState)([]),ie=(0,r.Z)(re,2),de=ie[0],le=ie[1],se=(0,d.useState)(""),ce=(0,r.Z)(se,2),ue=ce[0],xe=ce[1],pe=(0,d.useState)(""),me=(0,r.Z)(pe,2),he=me[0],fe=me[1],Ze=c().create({baseURL:"http://localhost:80/"}),Ce=(0,d.useState)({}),ge=(0,r.Z)(Ce,2),be=ge[0],je=ge[1],ye=(0,d.useState)({}),ve=(0,r.Z)(ye,2),we=ve[0],Se=ve[1],ke=(0,d.useState)(!1),Oe=(0,r.Z)(ke,2),Re=Oe[0],Pe=Oe[1],Ae=(0,d.useState)(!1),De=(0,r.Z)(Ae,2),Ie=De[0],Be=De[1],Ee=function(e,t){je((0,i.Z)((0,i.Z)({},be),{},(0,o.Z)({},e,t))),we[e]&&Se((0,i.Z)((0,i.Z)({},we),{},(0,o.Z)({},e,null)))},Ne=(0,d.useState)(0),Te=(0,r.Z)(Ne,2),Le=Te[0],Fe=Te[1],We=(0,d.useState)(0),Ke=(0,r.Z)(We,2),Ge=Ke[0],_e=Ke[1],Ue=(0,d.useState)("Choose..."),Me=(0,r.Z)(Ue,2),Qe=Me[0],Ve=Me[1];(0,d.useEffect)((function(){Le>0&&0===Ge?Ve("Copex"):Ge>0&&0===Le?Ve("Opex"):Le>0&&Ge>0?Ve("Capex+Opex"):Ge&&""!==Ge||Le&&""!==Le||Ve(be.capexopex)}),[Le,Ge]);var qe={Add:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(A.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),Check:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(I.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),Clear:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(N.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),Delete:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(T.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),DetailPanel:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(E.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),Edit:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(L.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),Export:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(_.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),Filter:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(F.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),FirstPage:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(W.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),LastPage:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(K.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),NextPage:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(E.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),PreviousPage:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(B.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),ResetSearch:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(N.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),Search:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(U.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),SortArrow:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(D.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),ThirdStateCheck:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(G.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))})),ViewColumn:(0,d.forwardRef)((function(e,t){return(0,Q.jsx)(M.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t}))}))};Le>0&&0===Ge&&(document.getElementById("txtCapOpe").disabled=!0,document.getElementById("txtOpeBud").disabled=!0,document.getElementById("txtOpeAmo").disabled=!0),0===Le&&Ge>0&&(document.getElementById("txtCapOpe").disabled=!0,document.getElementById("txtCapBud").disabled=!0,document.getElementById("txtCapAmo").disabled=!0),Le>0&&Ge>0&&(document.getElementById("txtCapOpe").disabled=!0),"Copex"===be.capexopex&&(document.getElementById("txtOpeBud").disabled=!0,document.getElementById("txtOpeAmo").disabled=!0,document.getElementById("txtCapBud").disabled=!1,document.getElementById("txtCapAmo").disabled=!1),"Opex"===be.capexopex&&(document.getElementById("txtOpeBud").disabled=!1,document.getElementById("txtOpeAmo").disabled=!1,document.getElementById("txtCapBud").disabled=!0,document.getElementById("txtCapAmo").disabled=!0),"Capex+Opex"===be.capexopex&&(document.getElementById("txtOpeBud").disabled=!1,document.getElementById("txtOpeAmo").disabled=!1,document.getElementById("txtCapBud").disabled=!1,document.getElementById("txtCapAmo").disabled=!1);var He=[{dataKey:"taskStatus",header:"Status"},{dataKey:"performedDate",header:"Performed Date"},{dataKey:"performedBy",header:"Performed by"},{dataKey:"comment",header:"Comment"}],ze=[{header:"ERP Code",dataKey:"erpCode"},{header:"Rate Card Div",dataKey:"rateCardDiv"},{header:"Item Discreption",dataKey:"itemDiscreption"},{header:"UoM",dataKey:"itemUom"},{header:"Unit Rate",dataKey:"itemRate"},{header:"Quantity",dataKey:"itemQty"},{header:"Item Total",dataKey:"itemTotal"},{header:"Capex/Opex",dataKey:"capexopexLine"},{header:"Comment",dataKey:"itemComment"}],Je=(0,l.k6)();(0,d.useEffect)((function(){e.location.data?(f([{name:e.location.data.row.assignedMobitelOfficer.name}]),H([{companyName:e.location.data.row.assignedSubcon.companyName}]),je({taskRef:e.location.data.row.taskRef,siteID:e.location.data.row.siteID,siteName:e.location.data.row.siteName,actualTaskStartDate:e.location.data.row.taskHistory.find((function(e){return"Task commenced"===e.taskStatus})).performedDate.split("T")[0],actualTaskCompletedDate:e.location.data.row.taskHistory.find((function(e){return"Task completed"===e.taskStatus})).performedDate.split("T")[0],taskAssignedDiv:e.location.data.row.taskAssignedDiv,assignedMobitelOfficer:e.location.data.row.assignedMobitelOfficer.name,workScope:e.location.data.row.workScope,assignedSubcon:e.location.data.row.assignedSubcon.companyName,verificationOneId:e.location.data.row.approvalPath[0].name,verificationTwoId:e.location.data.row.approvalPath[1].name,approvalId:e.location.data.row.approvalPath[2].name}),ee(e.location.data.row.boqs[e.location.data.row.boqs.length-1].boqData),oe(e.location.data.row.boqs[e.location.data.row.boqs.length-1].totalCost),le(e.location.data.row.taskHistory.filter((function(e){return"BOQ Verified_0"===e.taskStatus||"BOQ Verified_1"===e.taskStatus||"BOQ Verified_2"===e.taskStatus||"BOQ Approved"===e.taskStatus||"BOQ submitted"===e.taskStatus||"BOQ Rejected"===e.taskStatus}))),Fe(e.location.data.row.boqs[e.location.data.row.boqs.length-1].CapexPrAmount),_e(e.location.data.row.boqs[e.location.data.row.boqs.length-1].OpexPrAmount)):Je.push("/raisePrTasks")}),[]);var Xe=function(e,t){"clickaway"!==t&&Pe(!1)};return(0,Q.jsxs)("div",{children:[(0,Q.jsxs)("div",{className:"content-wrapper",children:[(0,Q.jsx)("div",{className:"content-header",children:(0,Q.jsx)("section",{className:"content-header",children:(0,Q.jsx)("div",{className:"container-fluid",children:(0,Q.jsx)("div",{className:"row mb-2",children:(0,Q.jsx)("div",{className:"col-sm-6",children:(0,Q.jsxs)("h1",{children:["Raise PR Task ID: ",be.taskRef," "]})})})})})}),(0,Q.jsx)("section",{className:"content",children:(0,Q.jsxs)("div",{className:"container-fluid",children:[(0,Q.jsxs)(u.Z,{children:[(0,Q.jsxs)(x.Z,{children:[(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Site ID"}),(0,Q.jsx)(u.Z.Control,{disabled:!0,value:be.siteID,className:"col-md-9",type:"text",placeholder:"Enter site ID",isInvalid:!!we.siteID}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.siteID})]}),(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Site Name"}),(0,Q.jsx)(u.Z.Control,{disabled:!0,value:be.siteName,type:"text",placeholder:"Enter site Name",isInvalid:!!we.siteName}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.siteName})]}),(0,Q.jsx)(u.Z.Group,{as:p.Z,controlId:""})]}),(0,Q.jsxs)(x.Z,{className:"mb-3",children:[(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Actual Work Commencement Date"}),(0,Q.jsx)(u.Z.Control,{disabled:!0,value:be.actualTaskStartDate,className:"col-md-9",type:"date",isInvalid:!!we.actualTaskStartDate}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.actualTaskStartDate})]}),(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Actual Work Completed Date"}),(0,Q.jsx)(u.Z.Control,{disabled:!0,value:be.actualTaskCompletedDate,className:"col-md-9",type:"date",isInvalid:!!we.actualTaskCompletedDate}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.actualTaskCompletedDate})]}),(0,Q.jsx)(u.Z.Group,{as:p.Z})]}),(0,Q.jsxs)(x.Z,{children:[(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Task Assigned Division"}),(0,Q.jsxs)(u.Z.Control,{disabled:!0,value:be.taskAssignedDiv,as:"select",defaultValue:"Choose...",isInvalid:!!we.taskAssignedDiv,children:[(0,Q.jsx)("option",{children:"Choose..."}),(0,Q.jsx)("option",{children:"Project_Radio"}),(0,Q.jsx)("option",{children:"Project_Core"}),(0,Q.jsx)("option",{children:"Project_TX"}),(0,Q.jsx)("option",{children:"Project_IBS"}),(0,Q.jsx)("option",{children:"Project_WiFi"})]}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.taskAssignedDiv})]}),(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Assigned Mobitel Officer"}),(0,Q.jsxs)(u.Z.Control,{disabled:!0,as:"select",value:be.assignedMobitelOfficer,defaultValue:"Choose...",isInvalid:!!we.assignedMobitelOfficer,children:[(0,Q.jsx)("option",{children:"Choose..."}),s.map((function(e){return(0,Q.jsx)("option",{value:e._id,children:e.name})}))]}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.assignedMobitelOfficer})]}),(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Assigned subcontractor"}),(0,Q.jsxs)(u.Z.Control,{disabled:!0,value:be.assignedSubcon,as:"select",defaultValue:"Choose...",isInvalid:!!we.assignedSubcon,children:[(0,Q.jsx)("option",{children:"Choose..."}),q.map((function(e){return(0,Q.jsx)("option",{value:e._id,children:e.companyName})}))]}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.assignedSubcon})]})]}),(0,Q.jsx)(x.Z,{children:(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"High level work scope"}),(0,Q.jsx)(u.Z.Control,{disabled:!0,value:be.workScope,as:"textarea",rows:2,placeholder:"",isInvalid:!!we.workScope}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.workScope})]})})]}),(0,Q.jsx)(b(),{title:"Raise PR-"+be.siteID+"_"+be.taskRef,data:$,columns:[{title:"ERP Code",field:"erpCode",filtering:!1,editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Rate Card Div",field:"rateCardDiv",editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Item Discreption",field:"itemDiscreption",filtering:!1,editable:!1,cellStyle:{width:300,minWidth:300,maxWidth:300,height:1}},{title:"UoM",field:"itemUom",editable:!1,cellStyle:{width:50,minWidth:50,maxWidth:50,height:1}},{title:"Unit Rate",field:"itemRate",editable:!1,filtering:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Quantity",field:"itemQty",editable:!1,cellStyle:{width:50,minWidth:50,maxWidth:50,height:1}},{title:"Item Total",field:"itemTotal",type:"currency",currencySetting:{currencyCode:"LKR"},editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Capex/Opex",field:"capexopexLine",cellStyle:{width:100,minWidth:100,maxWidth:100,height:1},editable:!1},{title:"Comment",field:"itemComment",editable:"onUpdate",cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}}],icons:qe,editable:{onRowUpdate:function(e,t){return new Promise((function(a,o){var r=t.tableData.id,i=(0,n.Z)($);e.itemTotal=e.itemRate*e.itemQty,i[r]=e,setTimeout((function(){ee(i),a()}),2e3)}))}},options:{exportButton:!0,pageSizeOptions:[$.length,5,10,20],paginationType:"stepped",showTextRowsSelected:!1,actionsColumnIndex:-1,filtering:!1,tableLayout:"auto",rowStyle:{backgroundColor:"#EEE"},headerStyle:{backgroundColor:"#01579b",color:"#FFF"},exportPdf:function(e,t){var a=new O.jsPDF({orientation:"landscape"});P()(a,{head:[["Task ID : "+be.taskRef]]}),P()(a,{theme:"grid",head:[["Site ID","Site Name","Assigned Mobitel Officer","Assigned Subcon","Capex Amount","Opex Amount","Total Value"]],body:[[be.siteID,be.siteName,be.assignedMobitelOfficer,be.assignedSubcon,Le&&""!==Le?Le.toLocaleString("en-US",{style:"currency",currency:"LKR"}):"Not Defined",Ge&&""!==Ge?Ge.toLocaleString("en-US",{style:"currency",currency:"LKR"}):"Not Defined",ne.toLocaleString("en-US",{style:"currency",currency:"LKR"})]]}),P()(a,{head:[["BOQ"]]}),P()(a,{theme:"grid",columnStyles:{itemRate:{halign:"right"},itemTotal:{halign:"right"}},columns:ze,body:t}),P()(a,{head:[["Approval Hirarchy"]]}),P()(a,{theme:"grid",columns:He,body:de.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{performedBy:e.performedBy.name})}))});var n=new Date;"".concat(n.getFullYear()).concat((n.getMonth()+1).toString().padStart(2,"0")).concat(n.getDate().toString().padStart(2,"0"));a.save("BOQ_".concat(be.taskRef,"_","".concat((new Date).getFullYear()).concat(((new Date).getMonth()+1).toString().padStart(2,"0")).concat((new Date).getDate().toString().padStart(2,"0")),".pdf")),console.log("BOQ_".concat(be.taskRef,"_","".concat((new Date).getFullYear()).concat(((new Date).getMonth()+1).toString().padStart(2,"0")).concat((new Date).getDate().toString().padStart(2,"0")),".pdf"))}},components:{Pagination:function(e){return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(Z.ZP,{container:!0,style:{pading:300,background:"#f5f5f5"},children:[(0,Q.jsxs)(Z.ZP,{sm:9,item:!0,children:[(0,Q.jsx)(C.Z,{align:"right",variant:"subtitle1",children:"Capex Amount"}),(0,Q.jsx)(C.Z,{align:"right",variant:"subtitle1",children:"Opex Amount"}),(0,Q.jsx)(C.Z,{align:"right",fontWeight:"bold",variant:"subtitle1",children:"Total Amount"})]}),(0,Q.jsxs)(Z.ZP,{sm:3,align:"center",children:[(0,Q.jsx)(C.Z,{align:"right",variant:"subtitle1",children:Le?"LKR "+parseFloat(Le):"LKR 0.00"}),(0,Q.jsx)(C.Z,{align:"right",variant:"subtitle1",children:Ge?"LKR "+parseFloat(Ge):"LKR 0.00"}),(0,Q.jsx)(C.Z,{align:"right",fontWeight:"bold",variant:"subtitle1",children:"LKR "+ne})]})]}),(0,Q.jsx)(j.Z,(0,i.Z)({},e))]})}}}),(0,Q.jsx)("br",{}),(0,Q.jsx)(x.Z,{children:(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Approval History"}),(0,Q.jsx)("div",{style:{height:250,width:"100%"},children:(0,Q.jsx)(y._$r,{getRowId:function(e){return e._id},rows:de,columns:[{field:"taskStatus",headerName:"Status",width:250},{field:"performedDate",headerName:"Performed Date",width:200,valueGetter:function(e){return e.row.performedDate.split("T")[0]}},{field:"performedBy",headerName:"Performed by",width:200,valueGetter:function(e){return e.row.performedBy.name}},{field:"comment",headerName:"Comment",width:500}],pageSize:5,rowsPerPageOptions:[5],rowHeight:30,headerHeight:40})})]})}),(0,Q.jsxs)(x.Z,{children:[(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"PR Number"}),(0,Q.jsx)(u.Z.Control,{value:be.PRnumber,onChange:function(e){return Ee("PRnumber",e.target.value)},type:"text",rows:2,placeholder:"Enter PR Number",isInvalid:!!we.PRnumber}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.PRnumber})]}),(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Capex or Opex"}),(0,Q.jsxs)(u.Z.Control,{id:"txtCapOpe",value:Qe,onChange:function(e){return Ee("capexopex",e.target.value)},as:"select",isInvalid:!!we.capexopex,children:[(0,Q.jsx)("option",{value:"",children:"Choose..."}),(0,Q.jsx)("option",{value:"Copex",children:"Capex"}),(0,Q.jsx)("option",{value:"Opex",children:"Opex"}),(0,Q.jsx)("option",{value:"Capex+Opex",children:"Capex + Opex"})]}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.capexopex})]}),(0,Q.jsx)(u.Z.Group,{as:p.Z}),(0,Q.jsx)(u.Z.Group,{as:p.Z})]}),(0,Q.jsxs)(x.Z,{children:[(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Capex Budget Code"}),(0,Q.jsx)(u.Z.Control,{id:"txtCapBud",value:be.budgetCodeCapex,onChange:function(e){return Ee("budgetCodeCapex",e.target.value)},type:"text",rows:1,placeholder:"Enter Capex Budget Code",isInvalid:!!we.budgetCodeCapex}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.budgetCodeCapex})]}),(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Capex Amount"}),(0,Q.jsx)(u.Z.Control,{id:"txtCapAmo",value:Le,onChange:function(e){return Ee("CapexPrAmount",e.target.value)},type:"text",rows:1,placeholder:"Enter Capex Amount",isInvalid:!!we.CapexPrAmount}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.CapexPrAmount})]}),(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Opex Budget Code"}),(0,Q.jsx)(u.Z.Control,{id:"txtOpeBud",value:be.budgetCodeOpex,onChange:function(e){return Ee("budgetCodeOpex",e.target.value)},type:"text",rows:1,placeholder:"Enter Opex Budget Code",isInvalid:!!we.budgetCodeOpex}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.budgetCodeOpex})]}),(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Opex Amount"}),(0,Q.jsx)(u.Z.Control,{id:"txtOpeAmo",value:Ge,onChange:function(e){return Ee("OpexPrAmount",e.target.value)},type:"text",rows:1,placeholder:"Enter Opex Amount",isInvalid:!!we.OpexPrAmount}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.OpexPrAmount})]})]}),(0,Q.jsx)(x.Z,{children:(0,Q.jsxs)(u.Z.Group,{as:p.Z,children:[(0,Q.jsx)(u.Z.Label,{children:"Comments"}),(0,Q.jsx)(u.Z.Control,{onChange:function(e){return Ee("comment",e.target.value)},as:"textarea",rows:2,value:be.comment,placeholder:"Enter your comments",isInvalid:!!we.comment}),(0,Q.jsx)(u.Z.Control.Feedback,{type:"invalid",children:we.comment})]})}),(0,Q.jsx)(m.Z,{variant:"primary",onClick:function(t){t.preventDefault();var a=function(){var e=be.comment,t=be.PRnumber,a=(be.capexopex,be.budgetCodeCapex),n=be.budgetCodeOpex,o={};return e&&""!==e||(o.comment="cannot be blank!"),t&&""!==t||(o.PRnumber="cannot be blank!"),"Copex"!==Qe||a&&""!==a||(o.budgetCodeCapex="cannot be blank!"),"Opex"!==Qe||n&&""!==n||(o.budgetCodeOpex="cannot be blank!"),"Capex+Opex"!==Qe||a&&""!==a||(o.budgetCodeCapex="cannot be blank!"),"Capex+Opex"!==Qe||n&&""!==n||(o.budgetCodeOpex="cannot be blank!"),be.capexopex&&""!==be.capexopex||Qe&&""!==Qe||(o.capexopex="cannot be blank!"),"Copex"!==be.capexopex||a&&""!==a||(o.budgetCodeCapex="cannot be blank!"),"Opex"!==be.capexopex||n&&""!==n||(o.budgetCodeOpex="cannot be blank!"),"Capex+Opex"!==be.capexopex||a&&""!==a||(o.budgetCodeCapex="cannot be blank!"),"Capex+Opex"!==be.capexopex||n&&""!==n||(o.budgetCodeOpex="cannot be blank!"),"Opex"===be.capexopex&&Number(be.OpexPrAmount)!==ne&&(o.OpexPrAmount="Check Opex PR Amount!"),"Copex"===be.capexopex&&Number(be.CapexPrAmount)!==ne&&(o.CapexPrAmount="Check Capex PR Amount!"),"Capex+Opex"===be.capexopex&&Number(be.CapexPrAmount)+Number(be.OpexPrAmount)!==ne&&(o.CapexPrAmount="Check Capex & Opex PR Amounts!"),"Capex+Opex"===be.capexopex&&Number(be.CapexPrAmount)+Number(be.OpexPrAmount)!==ne&&(o.OpexPrAmount="Check Capex & Opex PR Amounts!"),console.log("CAP>>"+be.CapexPrAmount),console.log("OPE>>"+be.OpexPrAmount),console.log("TOT>>"+ne),console.log("Cal="+(Number(be.CapexPrAmount)+Number(be.OpexPrAmount))),o}();if(Object.keys(a).length>0)Se(a);else{var n={taskStatus:"PR Raised",PRnumber:be.PRnumber,capexopex:be.capexopex||Qe,budgetCodeCapex:be.budgetCodeCapex,budgetCodeOpex:be.budgetCodeOpex,CapexPrAmount:be.CapexPrAmount||Le,OpexPrAmount:be.OpexPrAmount||Ge,totalCost:ne};console.log("form.CapexPrAmount="+be.CapexPrAmount),console.log("form.OpexPrAmount="+be.OpexPrAmount),console.log("CapexPrAmount="+Le),console.log("OpexPrAmount="+Ge),console.log("|CAP|"+be.CapexPrAmount||0),console.log("|OPE|"+be.OpexPrAmount||0),Ze.put("projonline/update/"+e.location.data.row._id,{totalCost:ne,boqData:$,taskObject:n,taskHistory:{taskStatus:n.taskStatus,comment:be.comment}},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(t){Be(!0),setTimeout((function(){fe(t.data.alart),xe(t.data.severity),Pe(!0)}),2e3),setTimeout((function(){Be(!1),Pe(!1),e.history.push({pathname:"/raisePrTasks"})}),2e3)})).catch((function(e){console.log(e)}))}},children:"PR Raised"})]})})]}),(0,Q.jsx)(h.Z,{open:Re,autoHideDuration:6e3,onClose:Xe,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,Q.jsx)(V,{onClose:Xe,severity:ue,sx:{width:"100%"},children:he})}),(0,Q.jsx)(v.Z,{open:Ie,onClose:Xe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,Q.jsx)(S.Z,{children:(0,Q.jsx)(w.Z,{sx:{display:"flex"},children:(0,Q.jsx)(k.Z,{})})})})]})}))},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=7028.21301c3a.chunk.js.map