"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8482],{88482:(e,r,a)=>{a.r(r),a.d(r,{default:()=>w});var s=a(72791),t=a(79271),n=a(74569),o=a.n(n),l=a(3986),d=(a(2468),a(43360)),i=a(39474),c=a(16149),h=a(89743),x=a(2677),u=a(34575),j=a(19658),p=a(29818),m=a(64554),Z=a(39157),g=a(13239),v=a(80184);const f=s.forwardRef((function(e,r){return(0,v.jsx)(j.Z,{elevation:6,ref:r,variant:"filled",...e})}));const w=(0,t.EN)((function(){let[e,r]=(0,s.useState)([]),[a,t]=(0,s.useState)([]),[n,j]=(0,s.useState)([]),[w,N]=(0,s.useState)([]),[S,k]=(0,s.useState)(!1),[y,C]=(0,s.useState)(""),[b,I]=(0,s.useState)(""),[H,O]=(0,s.useState)({}),[P,R]=(0,s.useState)(!1);const A=(e,r)=>{j({...n,[r]:e.target.value})},[L,T]=(0,s.useState)(!1),B=()=>T(!1),D=o().create({baseURL:"http://35.78.68.113:8072/projonline"});(0,s.useEffect)((()=>{G()}),[]);const G=()=>{R(!0),D.get("projonline/allhandoverchanges/approved",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{r(e.data),R(!1)})).catch((e=>{console.log(e)}))},q=(e,r)=>{"clickaway"!==r&&k(!1)},E=[{field:"taskRef",headerName:"TaskID",width:250},{field:"siteID",headerName:"SiteID",width:150},{field:"siteName",headerName:"Site Name",width:175},{field:"project",headerName:"Project",width:250},{field:"subProject",headerName:"Sub Project",width:250},{field:"Recently Approved Handover Changes",width:250,align:"center",renderCell:e=>(0,v.jsx)(d.Z,{variant:"primary",style:{width:100},onClick:()=>{return r=e.row,t(r),j(r.newProperties),N(r.headerProperties),void T(!0);var r},children:"Show"})}];return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"content-wrapper",children:[(0,v.jsx)("div",{className:"content-header",children:(0,v.jsx)("section",{className:"content-header",children:(0,v.jsx)("div",{className:"container-fluid",children:(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-sm-6",children:(0,v.jsx)("h1",{children:"Recently Approved Handover Changes"})})})})})}),(0,v.jsx)("div",{style:{height:610,width:"100%"},children:(0,v.jsx)(l._$r,{getRowId:e=>e._id,rows:e,columns:E,pageSize:15,rowsPerPageOptions:[15],rowHeight:30,headerHeight:40,components:{Toolbar:l.npt}})})]}),(0,v.jsxs)(i.Z,{show:L,onHide:B,size:"lg",animation:!1,children:[(0,v.jsx)(i.Z.Header,{closeButton:!0,children:(0,v.jsx)(i.Z.Title,{children:"Edit Handover"})}),(0,v.jsx)(i.Z.Body,{children:(0,v.jsxs)(c.Z,{onSubmit:B,children:[null===w||void 0===w?void 0:w.map(((e,r)=>r<3?(0,v.jsx)(h.Z,{children:(0,v.jsxs)(c.Z.Group,{className:"m-2",controlId:"refid",as:x.Z,children:[(0,v.jsx)(c.Z.Label,{children:e}),(0,v.jsx)(c.Z.Control,{className:"mr-1 ml-1",value:n[r],onChange:e=>A(e,r),type:"text",readOnly:!0})]})}):(0,v.jsx)(h.Z,{children:(0,v.jsxs)(c.Z.Group,{className:"m-2",controlId:"refid",as:x.Z,children:[(0,v.jsx)(c.Z.Label,{children:e}),(0,v.jsxs)("div",{className:"d-flex flex-row",children:[(0,v.jsx)(c.Z.Control,{className:"mr-1 ml-1",value:a.existingProperties[r],type:"text",readOnly:!0}),(0,v.jsx)(c.Z.Control,{className:"mr-1 ml-1 ".concat(a.existingProperties[r]!=n[r]?"text-danger":""),value:n[r],onChange:e=>A(e,r),type:"text",readOnly:!0})]})]})}))),a.taskStatus&&(0,v.jsx)(h.Z,{children:(0,v.jsxs)(c.Z.Group,{className:"m-3",controlId:"refid",as:x.Z,children:[(0,v.jsx)(c.Z.Label,{children:"Requested Status"}),(0,v.jsx)(c.Z.Control,{type:"text",rows:3,required:!0,value:a.taskStatus,readonly:!0})]})}),(0,v.jsx)(h.Z,{children:(0,v.jsxs)(c.Z.Group,{className:"m-3",controlId:"refid",as:x.Z,children:[(0,v.jsx)(c.Z.Label,{children:"Reason for the change request"}),(0,v.jsx)(c.Z.Control,{as:"textarea",rows:3,required:!0,value:a.comment,readonly:!0})]})}),(0,v.jsx)(h.Z,{children:(0,v.jsxs)(c.Z.Group,{className:"m-3",controlId:"refid",as:x.Z,children:[(0,v.jsx)(c.Z.Label,{children:"Approve Comment"}),(0,v.jsx)(c.Z.Control,{as:"textarea",rows:3,readonly:!0,value:a.approveComment})]})})]})}),(0,v.jsx)(i.Z.Footer,{children:(0,v.jsx)(d.Z,{variant:"primary",onClick:()=>{D.put("projonline/updatehandoverchanges/".concat(a._id),{status:"Change Acknowledged"},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{D.put("projonline/update/".concat(a.taskRefID),{taskObject:{},taskHistory:{taskStatus:"Change Acknowledged"}},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((e=>{k(!0),C("success"),I("Change Acknowledged"),T(!1),G()})).catch((e=>{console.log(e),k(!0),C("error"),I("Error occured")}))})).catch((e=>{console.log(e)}))},children:"Acknowledge"})})]}),(0,v.jsx)(u.Z,{open:S,autoHideDuration:6e3,onClose:q,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,v.jsx)(f,{onClose:q,severity:y,sx:{width:"100%"},children:b})}),(0,v.jsx)(p.Z,{open:P,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,v.jsx)(Z.Z,{children:(0,v.jsx)(m.Z,{sx:{display:"flex"},children:(0,v.jsx)(g.Z,{})})})})]})}))},2468:(e,r,a)=>{a.d(r,{Z:()=>s});const s={}}}]);
//# sourceMappingURL=8482.b8a9f478.chunk.js.map