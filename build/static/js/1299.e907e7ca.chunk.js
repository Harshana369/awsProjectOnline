(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1299],{16755:function(e,s,n){"use strict";n.r(s);var t=n(29439),a=n(72791),i=n(79271),r=n(74569),o=n.n(r),c=(n(2468),n(79836)),l=n(53382),d=n(53994),u=n(39281),h=n(56890),x=n(35855),f=n(10703),m=n(56125),j=n(13400),Z=n(85172),p=n(95678),g=n(20890),S=n(70546),k=(n(15617),n(58484)),b=n.n(k),v=n(47022),y=n(89743),w=n(2677),C=n(16149),N=n(43360),A=n(29818),D=n(64554),L=n(39157),O=n(13239),I=n(80184);function P(e){var s=e.row,n=a.useState(!1),i=(0,t.Z)(n,2),r=i[0],o=i[1];return(0,I.jsxs)(a.Fragment,{children:[(0,I.jsxs)(x.Z,{sx:{"& > *":{borderBottom:"unset"}},style:{height:10},padding:"none",children:[(0,I.jsx)(d.Z,{children:(0,I.jsx)(j.Z,{"aria-label":"expand row",size:"small",onClick:function(){return o(!r)},children:r?(0,I.jsx)(p.Z,{}):(0,I.jsx)(Z.Z,{})})}),(0,I.jsx)(d.Z,{component:"th",scope:"row",children:s.taskRef}),(0,I.jsx)(d.Z,{children:"undefined"===typeof s.siteID?"NA":s.siteID}),(0,I.jsx)(d.Z,{children:"undefined"===typeof s.assignedSubcon?"NA":s.assignedSubcon.companyName}),(0,I.jsx)(d.Z,{children:"undefined"===typeof s.assignedMobitelOfficer?"NA":s.assignedMobitelOfficer.name}),(0,I.jsx)(d.Z,{children:s.taskStatus})]}),(0,I.jsx)(x.Z,{children:(0,I.jsx)(d.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:(0,I.jsx)(m.Z,{in:r,timeout:"auto",unmountOnExit:!0,children:(0,I.jsxs)(D.Z,{sx:{margin:1},children:[(0,I.jsx)(g.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"History"}),(0,I.jsxs)(c.Z,{size:"small","aria-label":"purchases",children:[(0,I.jsx)(h.Z,{children:(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(d.Z,{children:"Action"}),(0,I.jsx)(d.Z,{children:"Performed by"}),(0,I.jsx)(d.Z,{children:"Date"}),(0,I.jsx)(d.Z,{children:"Comment"})]})}),(0,I.jsx)(l.Z,{children:s.taskHistory.map((function(e){return(0,I.jsxs)(x.Z,{children:[(0,I.jsxs)(d.Z,{children:[e.taskStatus,e.comStatus,e.sarStatus,e.patStatus,e.onairStatus]}),(0,I.jsx)(d.Z,{children:e.performedBy.name}),(0,I.jsx)(d.Z,{component:"th",scope:"row",children:e.performedDate.split("T")[0]}),(0,I.jsx)(d.Z,{children:e.comment})]},e.performedDate)}))})]})]})})})})]})}s.default=(0,i.EN)((function(){var e=(0,a.useState)([]),s=(0,t.Z)(e,2),n=s[0],i=s[1],r=(0,a.useState)([]),m=(0,t.Z)(r,2),j=m[0],Z=m[1],p=(0,a.useState)(""),g=(0,t.Z)(p,2),k=g[0],T=g[1],_=a.useState(10),M=(0,t.Z)(_,2),R=M[0],B=M[1],E=a.useState(0),z=(0,t.Z)(E,2),H=z[0],F=z[1],J=(0,a.useState)(!1),U=(0,t.Z)(J,2),V=U[0],q=U[1],G=o().create({baseURL:"http://ec2-65-2-5-82.ap-south-1.compute.amazonaws.com/"});return(0,a.useEffect)((function(){console.time("gettasks"),q(!0),G.get("projonline/gettasks",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(e){i(e.data.tasks),Z(e.data.tasks),q(!1),console.timeEnd("gettasks")})).catch((function(e){console.log(e)}))}),[]),H>0&&Math.max(0,(1+H)*R-n.length),(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{className:"content-wrapper",children:[(0,I.jsx)("div",{className:"content-header",children:(0,I.jsx)("section",{className:"content-header",children:(0,I.jsx)("div",{className:"container-fluid",children:(0,I.jsx)("div",{children:(0,I.jsx)("div",{children:(0,I.jsx)(v.Z,{children:(0,I.jsxs)(y.Z,{children:[(0,I.jsx)(w.Z,{xs:2,children:(0,I.jsx)("h1",{children:"All Tasks"})}),(0,I.jsx)(w.Z,{xs:7,children:(0,I.jsx)(C.Z.Control,{className:"me-auto",placeholder:"Search your item here...",onChange:function(e){return T(e.target.value)}})}),(0,I.jsx)(w.Z,{children:(0,I.jsx)(N.Z,{variant:"secondary",onClick:function(){var e=["taskRef","siteID","taskStatus"],s=j.filter((function(s){var n,t;return!(null===(n=s.assignedSubcon)||void 0===n||!n.companyName||!s.assignedSubcon.companyName.toLocaleLowerCase().includes(k.toLocaleLowerCase()))||(!(null===(t=s.assignedMobitelOfficer)||void 0===t||!t.username||!s.assignedMobitelOfficer.username.toLocaleLowerCase().includes(k.toLocaleLowerCase()))||e.some((function(e){var n;return null===(n=s[e])||void 0===n?void 0:n.toLocaleLowerCase().includes(k.toLocaleLowerCase())})))}));i(s)},children:"Search"})}),(0,I.jsx)(w.Z,{children:(0,I.jsx)("div",{className:"vr"})}),(0,I.jsx)(w.Z,{children:(0,I.jsx)(N.Z,{variant:"outline-success",onClick:function(e){for(var s=b().utils.book_new(),t=[],a=[],i=n.length-1;i>=0;i--){if("assignedSubcon"in n[i])var r=n[i].assignedSubcon.companyName;else r="N/A";if("assignedMobitelOfficer"in n[i])var o=n[i].assignedMobitelOfficer.username;else o="N/A";var c=[n[i].taskRef,n[i].siteID,r,o,n[i].taskStatus];t.unshift(c);var l=[];if("taskHistory"in n[i])n[i].taskHistory.forEach((function(e){l=[n[i].taskRef,e.taskStatus,e.comStatus,e.sarStatus,e.patStatus,e.onairStatus,e.performedBy.name,e.performedDate,e.comment],a.unshift(l)}))}l=["Task ID","Action","Commission Status","SAR Status","PAT Status","On-Air Status","Performed by","Date","Comment"],a.unshift(l),c=["Task ID","Site ID","Assigned Subcon","Assigned Mobitel Officer","Current Status"],t.unshift(c);var d=b().utils.aoa_to_sheet(t),u=b().utils.aoa_to_sheet(a);b().utils.book_append_sheet(s,d,"allTask"),b().utils.book_append_sheet(s,u,"history"),b().writeFile(s,"All Tasks.xlsx")},children:"Dowanload"})})]})})})})})})}),(0,I.jsx)(u.Z,{component:f.Z,children:(0,I.jsxs)(c.Z,{size:"small","aria-label":"collapsible table",children:[(0,I.jsx)(h.Z,{children:(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(d.Z,{}),(0,I.jsx)(d.Z,{children:"Task ID"}),(0,I.jsx)(d.Z,{children:"Site ID"}),(0,I.jsx)(d.Z,{children:"Assigned Subcon / Vender"}),(0,I.jsx)(d.Z,{children:"Assigned Officer"}),(0,I.jsx)(d.Z,{children:"Current Status"})]})}),(0,I.jsx)(l.Z,{children:(R>0?n.slice(H*R,H*R+R):n).map((function(e){return(0,I.jsx)(P,{row:e},e.name)}))})]})}),(0,I.jsx)(S.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:n.length,rowsPerPage:R,page:H,onPageChange:function(e,s){F(s)},onRowsPerPageChange:function(e){B(parseInt(e.target.value,10)),F(0)}})]}),(0,I.jsx)(A.Z,{open:V,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,I.jsx)(L.Z,{children:(0,I.jsx)(D.Z,{sx:{display:"flex"},children:(0,I.jsx)(O.Z,{})})})})]})}))},2468:function(){},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=1299.e907e7ca.chunk.js.map