(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1299],{16755:function(e,s,t){"use strict";t.r(s);var n=t(74165),a=t(15861),r=t(29439),i=t(72791),o=t(79271),c=t(74569),l=t.n(c),d=(t(2468),t(79836)),u=t(53382),h=t(53994),x=t(39281),f=t(56890),p=t(35855),j=t(56125),Z=t(13400),m=t(85172),g=t(95678),k=t(20890),S=t(70546),v=(t(15617),t(58484)),b=t.n(v),y=t(47022),w=t(89743),N=t(2677),A=t(16149),C=t(43360),D=t(29818),T=t(64554),I=t(39157),O=t(13239),_=t(80184);function P(e){var s=e.row,t=i.useState(!1),n=(0,r.Z)(t,2),a=n[0],o=n[1];return(0,_.jsxs)(i.Fragment,{children:[(0,_.jsxs)(p.Z,{sx:{"& > *":{borderBottom:"unset"}},style:{height:10},padding:"none",children:[(0,_.jsx)(h.Z,{children:(0,_.jsx)(Z.Z,{"aria-label":"expand row",size:"small",onClick:function(){return o(!a)},children:a?(0,_.jsx)(g.Z,{}):(0,_.jsx)(m.Z,{})})}),(0,_.jsx)(h.Z,{component:"th",scope:"row",children:s.taskRef}),(0,_.jsx)(h.Z,{children:"undefined"===typeof s.siteID?"NA":s.siteID}),(0,_.jsx)(h.Z,{children:"undefined"===typeof s.assignedSubcon?"NA":s.assignedSubcon.companyName}),(0,_.jsx)(h.Z,{children:"undefined"===typeof s.assignedMobitelOfficer?"NA":s.assignedMobitelOfficer.name}),(0,_.jsx)(h.Z,{children:s.taskStatus})]}),(0,_.jsx)(p.Z,{children:(0,_.jsx)(h.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:(0,_.jsx)(j.Z,{in:a,timeout:"auto",unmountOnExit:!0,children:(0,_.jsxs)(T.Z,{sx:{margin:1},children:[(0,_.jsx)(k.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"History"}),(0,_.jsxs)(d.Z,{size:"small","aria-label":"purchases",children:[(0,_.jsx)(f.Z,{children:(0,_.jsxs)(p.Z,{children:[(0,_.jsx)(h.Z,{children:"Action"}),(0,_.jsx)(h.Z,{children:"Performed by"}),(0,_.jsx)(h.Z,{children:"Date"}),(0,_.jsx)(h.Z,{children:"Comment"})]})}),(0,_.jsx)(u.Z,{children:s.taskHistory.map((function(e){return(0,_.jsxs)(p.Z,{children:[(0,_.jsxs)(h.Z,{children:[e.taskStatus,e.comStatus,e.sarStatus,e.patStatus,e.onairStatus]}),(0,_.jsx)(h.Z,{children:e.performedBy.name}),(0,_.jsx)(h.Z,{component:"th",scope:"row",children:e.performedDate.split("T")[0]}),(0,_.jsx)(h.Z,{children:e.comment})]},e.performedDate)}))})]})]})})})})]})}s.default=(0,o.EN)((function(){var e=(0,i.useState)([]),s=(0,r.Z)(e,2),t=s[0],o=s[1],c=(0,i.useState)([]),j=(0,r.Z)(c,2),Z=(j[0],j[1]),m=(0,i.useState)(""),g=(0,r.Z)(m,2),k=g[0],v=g[1],B=i.useState(10),E=(0,r.Z)(B,2),z=E[0],R=E[1],M=i.useState(0),H=(0,r.Z)(M,2),F=H[0],J=H[1],L=(0,i.useState)(!1),U=(0,r.Z)(L,2),V=U[0],q=U[1],G=(0,i.useState)(0),K=(0,r.Z)(G,2),Q=K[0],W=K[1],X=l().create({baseURL:"http://ec2-65-2-5-82.ap-south-1.compute.amazonaws.com/"});(0,i.useEffect)((function(){console.time("gettasks"),q(!0);var e=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.get("projonline/getalltasksfortable?pageSize=".concat(z,"&pageNumber=").concat(F+1),{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}});case 3:s=e.sent,o(s.data.tasks),Z(s.data.tasks),W(s.data.totalTasks),q(!1),console.log(s.data.tasks),console.timeEnd("gettasks"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[z,F]);var Y=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(s){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(!0),e.next=4,X.get(s,{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}});case 4:t=e.sent,o(t.data.tasks),W(t.data.totalTasks),q(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),q(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(s){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){console.time("gettasks"),Y("projonline/getalltasksfortable?pageSize=10&pageNumber=1"),console.timeEnd("gettasks")}),[]),(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"content-wrapper",children:[(0,_.jsx)("div",{className:"content-header",children:(0,_.jsx)("section",{className:"content-header",children:(0,_.jsx)("div",{className:"container-fluid",children:(0,_.jsx)("div",{children:(0,_.jsx)("div",{children:(0,_.jsx)(y.Z,{children:(0,_.jsxs)(w.Z,{children:[(0,_.jsx)(N.Z,{xs:2,children:(0,_.jsx)("h1",{children:"All Tasks"})}),(0,_.jsx)(N.Z,{xs:7,children:(0,_.jsx)(A.Z.Control,{className:"me-auto",placeholder:"Search your item here...",onChange:function(e){return v(e.target.value)}})}),(0,_.jsx)(N.Z,{children:(0,_.jsx)(C.Z,{variant:"secondary",onClick:function(){Y("projonline/searchtasks?search=".concat(k))},children:"Search"})}),(0,_.jsx)(N.Z,{children:(0,_.jsx)("div",{className:"vr"})}),(0,_.jsx)(N.Z,{children:(0,_.jsx)(C.Z,{variant:"outline-success",onClick:function(e){for(var s=b().utils.book_new(),n=[],a=[],r=t.length-1;r>=0;r--){if("assignedSubcon"in t[r])var i=t[r].assignedSubcon.companyName;else i="N/A";if("assignedMobitelOfficer"in t[r])var o=t[r].assignedMobitelOfficer.username;else o="N/A";var c=[t[r].taskRef,t[r].siteID,i,o,t[r].taskStatus];n.unshift(c);var l=[];if("taskHistory"in t[r])t[r].taskHistory.forEach((function(e){l=[t[r].taskRef,e.taskStatus,e.comStatus,e.sarStatus,e.patStatus,e.onairStatus,e.performedBy.name,e.performedDate,e.comment],a.unshift(l)}))}l=["Task ID","Action","Commission Status","SAR Status","PAT Status","On-Air Status","Performed by","Date","Comment"],a.unshift(l),c=["Task ID","Site ID","Assigned Subcon","Assigned Mobitel Officer","Current Status"],n.unshift(c);var d=b().utils.aoa_to_sheet(n),u=b().utils.aoa_to_sheet(a);b().utils.book_append_sheet(s,d,"allTask"),b().utils.book_append_sheet(s,u,"history"),b().writeFile(s,"All Tasks.xlsx")},children:"Dowanload"})})]})})})})})})}),(0,_.jsx)(x.Z,{children:(0,_.jsxs)(d.Z,{size:"small","aria-label":"collapsible table",children:[(0,_.jsx)(f.Z,{children:(0,_.jsxs)(p.Z,{children:[(0,_.jsx)(h.Z,{}),(0,_.jsx)(h.Z,{children:"Task ID"}),(0,_.jsx)(h.Z,{children:"Site ID"}),(0,_.jsx)(h.Z,{children:"Assigned Subcon / Vender"}),(0,_.jsx)(h.Z,{children:"Assigned Officer"}),(0,_.jsx)(h.Z,{children:"Current Status"})]})}),(0,_.jsx)(u.Z,{children:(t>0?t.slice(F*z,F*z+z):t).map((function(e){return(0,_.jsx)(P,{row:e},e.name)}))})]})}),(0,_.jsx)(S.Z,{component:"div",count:Q,rowsPerPage:z,page:F,onPageChange:function(e,s){console.log("change page"),console.log(s),J(s)},onRowsPerPageChange:function(e){R(parseInt(e.target.value,10)),J(0)}})]}),(0,_.jsx)(D.Z,{open:V,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,_.jsx)(I.Z,{children:(0,_.jsx)(T.Z,{sx:{display:"flex"},children:(0,_.jsx)(O.Z,{})})})})]})}))},2468:function(){},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=1299.6ae1ffa8.chunk.js.map