(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3711],{84292:function(e,n,o){"use strict";o.r(n);var a=o(4942),i=o(29439),t=o(1413),s=o(72791),r=o(79271),l=o(74569),c=o.n(l),d=o(89743),u=o(16149),h=o(2677),m=o(43360),p=o(34575),j=o(19658),v=(o(58484),o(97473),o(64554)),x=o(39157),Z=o(13239),f=o(29818),b=o(80184),C=s.forwardRef((function(e,n){return(0,b.jsx)(j.Z,(0,t.Z)({elevation:6,ref:n,variant:"filled"},e))}));n.default=(0,r.EN)((function(e){var n=(0,s.useState)([]),o=(0,i.Z)(n,2),r=o[0],l=o[1],j=(0,s.useState)([]),y=(0,i.Z)(j,2),g=y[0],N=y[1],k=(0,s.useState)(""),I=(0,i.Z)(k,2),P=I[0],w=I[1],S=(0,s.useState)(""),_=(0,i.Z)(S,2),O=_[0],F=_[1],T=c().create({baseURL:"http://localhost:8072/"}),L=(0,s.useState)({}),B=(0,i.Z)(L,2),D=B[0],G=B[1],A=(0,s.useState)({}),M=(0,i.Z)(A,2),V=M[0],R=M[1],U=(0,s.useState)(!1),E=(0,i.Z)(U,2),H=E[0],J=E[1],W=(0,s.useState)(!1),X=(0,i.Z)(W,2),z=X[0],q=X[1],K=(0,s.useState)(!0),Q=(0,i.Z)(K,2),Y=Q[0],$=Q[1],ee=(0,s.useState)(!1),ne=(0,i.Z)(ee,2),oe=ne[0],ae=ne[1],ie=(0,s.useState)(!1),te=(0,i.Z)(ie,2),se=te[0],re=te[1],le=(0,s.useState)("Choose..."),ce=(0,i.Z)(le,2),de=ce[0],ue=ce[1],he=function(e,n){G((0,t.Z)((0,t.Z)({},D),{},(0,a.Z)({},e,n))),V[e]&&R((0,t.Z)((0,t.Z)({},V),{},(0,a.Z)({},e,null)))};(0,s.useEffect)((function(){T.get("projonline/users",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(e){l(e.data.users.filter((function(e){return"Mobitel"===e.company.companyName}))),N(e.data.companys),G({adminRights:!1,activeStatus:!1,userCanAssignForTask:!1,isProjectCoordinator:!1,verificationOneId:"1",verificationTwoId:"1",approvalId:"1"})})).catch((function(e){console.log(e)}))}),[]);var me=function(e,n){"clickaway"!==n&&J(!1)};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"content-wrapper",children:[(0,b.jsx)("div",{className:"content-header",children:(0,b.jsx)("section",{className:"content-header",children:(0,b.jsx)("div",{className:"container-fluid",children:(0,b.jsx)("div",{className:"row mb-2",children:(0,b.jsx)("div",{className:"col-sm-6",children:(0,b.jsx)("h1",{children:"Add New user"})})})})})}),(0,b.jsx)("section",{className:"content",children:(0,b.jsx)("div",{className:"container-fluid",children:(0,b.jsxs)("form",{onSubmit:function(n){n.preventDefault();var o=function(){var e=D.name,n=D.username,o=D.email,a=D.company,i=(D.projectCoordinator,D.userDiv),t=D.visbilityBasedOn,s=D.mobileNo,r=(D.verificationOneId,D.verificationTwoId,D.approvalId,{});return"Mobitel"!==a||"Choose..."!==i&&i||(r.userDiv="Choose a division!"),"Mobitel"!==a||"Choose..."!==t&&t||(r.visbilityBasedOn="Choose a option!"),o&&""!==o||(r.email="cannot be blank!"),a&&"Choose..."!==a||(r.company="Select a option!"),e&&""!==e||(r.name="cannot be blank!"),n&&""!==n||(r.username="cannot be blank!"),s&&""!==s||(r.mobileNo="cannot be blank!"),r}();if(Object.keys(o).length>0)R(o);else{var a={};if("Mobitel"===D.company){var i=[D.verificationOneId,D.verificationTwoId,D.approvalId].filter((function(e){return"1"!==e})).filter((function(e){return"2"!==e}));a={name:D.name,email:D.email,company:g.find((function(e){return e.companyName===D.company}))._id,userDiv:D.userDiv,mobileNo:D.mobileNo,username:D.username,adminRights:se,activeStatus:Y,userCanAssignForTask:oe,visbilityBasedOn:D.visbilityBasedOn,projectCoordinator:"1"==D.projectCoordinator?null:D.projectCoordinator,isProjectCoordinator:D.isProjectCoordinator,approvalPath:i}}else a={name:D.name,email:D.email,company:g.find((function(e){return e.companyName===D.company}))._id,mobileNo:D.mobileNo,username:D.username,adminRights:se,activeStatus:Y,visbilityBasedOn:g.find((function(e){return e.companyName===D.company})).companyCategory,userCanAssignForTask:oe,approvalPath:[]};T.post("projonline/signup",a,{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(n){q(!0),setTimeout((function(){w(n.data.msg),F(n.data.variant),J(!0)}),2e3),setTimeout((function(){q(!1),J(!1),e.history.push({pathname:"/updateUser"})}),5e3)})).catch((function(e){console.log(e)}))}},enctype:"multipart/form-data",children:[(0,b.jsxs)(d.Z,{className:"mb-3",children:[(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Name"}),(0,b.jsx)(u.Z.Control,{onChange:function(e){return he("name",e.target.value)},value:D.name,className:"col-md-9",type:"text",isInvalid:!!V.name}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.name})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Username"}),(0,b.jsx)(u.Z.Control,{onChange:function(e){return he("username",e.target.value)},value:D.username,className:"col-md-9",type:"text",isInvalid:!!V.username}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.username})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Email"}),(0,b.jsx)(u.Z.Control,{onChange:function(e){return he("email",e.target.value)},value:D.email,className:"col-md-9",type:"text",isInvalid:!!V.email}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.email})]})]}),(0,b.jsxs)(d.Z,{className:"mb-3",children:[(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Company"}),(0,b.jsxs)(u.Z.Control,{onChange:function(e){he("company",e.target.value),function(e){var n=g.find((function(n){return n.companyName===e}));n&&ue(n.companyCategory)}(e.target.value)},value:D.company,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!V.company,children:[(0,b.jsx)("option",{children:"Choose..."}),g.map((function(e){return(0,b.jsx)("option",{value:e.companyName,children:e.companyName},e.companyName)}))]}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.company})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"User Division"}),(0,b.jsxs)(u.Z.Control,{onChange:function(e){return he("userDiv",e.target.value)},value:D.userDiv,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!V.userDiv,disabled:"Mobitel"!==D.company,children:[(0,b.jsx)("option",{value:"Choose...",children:"Choose..."}),(0,b.jsx)("option",{children:"Planning_Radio"}),(0,b.jsx)("option",{children:"Planning_Core"}),(0,b.jsx)("option",{children:"Planning_TX"}),(0,b.jsx)("option",{children:"Planning_IBS"}),(0,b.jsx)("option",{children:"Planning_WiFi"}),(0,b.jsx)("option",{children:"Project_Radio"}),(0,b.jsx)("option",{children:"Project_Core"}),(0,b.jsx)("option",{children:"Project_TX"}),(0,b.jsx)("option",{children:"Project_IBS"}),(0,b.jsx)("option",{children:"Project_WiFi"})]}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.userDiv})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Mobile No"}),(0,b.jsx)(u.Z.Control,{onChange:function(e){return he("mobileNo",e.target.value)},value:D.mobileNo,className:"col-md-9",type:"number",isInvalid:!!V.mobileNo}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.mobileNo})]})]}),(0,b.jsxs)(d.Z,{className:"mb-3",children:[(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Visibility Based On"}),(0,b.jsxs)(u.Z.Control,{onChange:function(e){return he("visbilityBasedOn",e.target.value)},value:"Mobitel"!==D.company?"company":D.visbilityBasedOn,className:"col-md-9",as:"select",defaultValue:"Choose...",isInvalid:!!V.visbilityBasedOn,disabled:"Mobitel"!==D.company,children:[(0,b.jsx)("option",{children:de}),(0,b.jsx)("option",{value:"Admin",children:"Admin"}),(0,b.jsx)("option",{value:"Planning",children:"Planning"}),(0,b.jsx)("option",{value:"Project_Div_Head",children:"Project_Div_Head"}),(0,b.jsx)("option",{value:"Project_PM",children:"Project_PM"}),(0,b.jsx)("option",{value:"Project_TO",children:"Project_TO"}),(0,b.jsx)("option",{value:"Project_Coor",children:"Project_Coor"}),(0,b.jsx)("option",{value:"Subcon",children:"Subcon"})]}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.visbilityBasedOn})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Project Coordinator"}),(0,b.jsxs)(u.Z.Control,{as:"select",onChange:function(e){return he("projectCoordinator",e.target.value)},value:D.projectCoordinator,className:"col-md-9",defaultValue:"Choose...",isInvalid:!!V.visbilityBasedOn,disabled:"Mobitel"!==D.company,children:[(0,b.jsx)("option",{value:"1",children:"Choose..."}),r.filter((function(e){return!0===e.isProjectCoordinator})).map((function(e){return(0,b.jsx)("option",{value:e._id,children:e.name})}))]}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.projectCoordinator})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Is Project Coordinator"}),(0,b.jsx)(u.Z.Check,{onChange:function(e){return he("isProjectCoordinator",!D.isProjectCoordinator)},value:D.isProjectCoordinator,checked:D.isProjectCoordinator,className:"col-md-9",id:"custom-switch-4",type:"switch",disabled:"Mobitel"!==D.company})]})]}),(0,b.jsxs)(d.Z,{className:"mb-3",children:[(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Admin Rights"}),(0,b.jsx)(u.Z.Check,{onChange:function(e){he("adminRights",!se),re(!se)},value:se,checked:se,className:"col-md-9",id:"custom-switch-1",type:"switch"})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Active Status"}),(0,b.jsx)(u.Z.Check,{onChange:function(e){return $(!Y)},value:Y,checked:Y,className:"col-md-9",id:"custom-switch-2",type:"switch"})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"User Can Assign For Task"}),(0,b.jsx)(u.Z.Check,{onChange:function(e){return ae(!oe)},value:oe,checked:oe,className:"col-md-9",id:"custom-switch-3",type:"switch"})]})]}),(0,b.jsxs)(d.Z,{children:[(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Verification by (Level 1)"}),(0,b.jsxs)(u.Z.Control,{as:"select",className:"col-md-9",onChange:function(e){return he("verificationOneId",e.target.value)},value:D.verificationOneId,isInvalid:!!V.verificationOneId,defaultValue:"Choose...",disabled:!0!==oe,children:[(0,b.jsx)("option",{value:"1",children:"Choose..."}),r.map((function(e){return(0,b.jsx)("option",{value:e._id,children:e.name})}))]}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.verificationOneId})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Verification by (Level 2)"}),(0,b.jsxs)(u.Z.Control,{as:"select",className:"col-md-9",onChange:function(e){return he("verificationTwoId",e.target.value)},value:D.verificationTwoId,isInvalid:!!V.verificationTwoId,defaultValue:"Choose...",disabled:!0!==oe,children:[(0,b.jsx)("option",{value:"1",children:"Choose..."}),(0,b.jsx)("option",{value:"2",children:"Not Applicable"}),r.map((function(e){return(0,b.jsx)("option",{value:e._id,children:e.name})}))]}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.verificationTwoId})]}),(0,b.jsxs)(u.Z.Group,{as:h.Z,children:[(0,b.jsx)(u.Z.Label,{children:"Approval by"}),(0,b.jsxs)(u.Z.Control,{as:"select",className:"col-md-9",onChange:function(e){return he("approvalId",e.target.value)},value:D.approvalId,isInvalid:!!V.approvalId,defaultValue:"Choose...",disabled:!0!==oe,children:[(0,b.jsx)("option",{value:"1",children:"Choose..."}),r.map((function(e){return(0,b.jsx)("option",{value:e._id,children:e.name})}))]}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:V.approvalId})]})]}),(0,b.jsx)(m.Z,{variant:"primary",type:"submit",children:"Add a New User"})]})})})]}),(0,b.jsx)(p.Z,{open:H,autoHideDuration:6e3,onClose:me,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,b.jsx)(C,{onClose:me,severity:O,sx:{width:"100%"},children:P})}),(0,b.jsx)(f.Z,{open:z,onClose:me,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,b.jsx)(x.Z,{children:(0,b.jsx)(v.Z,{sx:{display:"flex"},children:(0,b.jsx)(Z.Z,{})})})})]})}))},97473:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},55382:function(){},72095:function(){},61219:function(){}}]);
//# sourceMappingURL=3711.132f1cc3.chunk.js.map