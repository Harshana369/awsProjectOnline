"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1975],{53063:function(e,t,i){i.d(t,{Z:function(){return W}});var a=i(1413),n=i(29439),r=i(83837),o=i(94026),s=i(1288),l=i(20269),c=i(26513),d=i(82159),u=i(72791),f=i(15617),h=i.n(f),m=i(63727),Z=i(51859),p=i(74569),x=i.n(p),j=i(5936),g=i(3395),b=i(872),w=i(31009),v=i(38996),S=i(5130),C=i(82271),k=i(41286),y=i(91903),R=i(12715),D=i(10111),O=i(35585),P=i(16346),T=i(5403),N=i(97911),B=i(80184),I=[];function W(e){var t=(0,u.useState)(I),i=(0,n.Z)(t,2),f=i[0],p=i[1],W=(0,u.useState)("all"),V=(0,n.Z)(W,2),L=V[0],F=V[1],A=e.openPopup,_=e.setOpenPopup,Q=(0,u.useState)([]),E=(0,n.Z)(Q,2),q=E[0],G=E[1],M=x().create({baseURL:"http://localhost:8072/"});(0,u.useEffect)((function(){I=[],M.get("projonline/allRateCards",{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(t){console.log(t.data),t.data.filter((function(t){return t.rateCardSubcon._id===JSON.parse(localStorage.getItem("user")).company._id&&t.rateCardValidTo>=e.acceptedDate&&t.rateCardValidFrom<=e.acceptedDate})).forEach((function(e){e.rateCardItems.forEach((function(t){t.rateCardDiv=e.rateCardDiv,I.push(t)}))}))})).catch((function(e){console.log(e)}))}),[]);var U={Add:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(j.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),Check:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(b.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),Clear:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(S.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),Delete:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(C.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),DetailPanel:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(v.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),Edit:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(k.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),Export:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(P.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),Filter:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(y.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),FirstPage:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(R.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),LastPage:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(D.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),NextPage:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(v.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),PreviousPage:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(w.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),ResetSearch:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(S.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),Search:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(T.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),SortArrow:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),ThirdStateCheck:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(O.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))})),ViewColumn:(0,u.forwardRef)((function(e,t){return(0,B.jsx)(N.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t}))}))},H=function(){Array.isArray(q)&&q.length&&e.callBk(f.filter((function(e){return q.includes(e)}))),_(!1);var t=I.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{tableData:{checked:!1}})}));p(t),G([])},J=function(){_(!1);var e=I.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{tableData:{checked:!1}})}));p(e),G([])};return(0,u.useEffect)((function(){p("all"===L?I:I.filter((function(e){return e.rateCard===L})))}),[L]),(0,B.jsx)(r.Z,{open:A,fullWidth:!0,maxWidth:"lg",children:(0,B.jsx)(o.Z,{children:(0,B.jsx)(h(),{title:"BOQ Line Items",columns:[{title:"ERP Code",field:"erpCode",cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Rate Card Div",field:"rateCardDiv",cellStyle:{width:150,minWidth:150,maxWidth:150,height:1}},{title:"Item Discreption",field:"itemDiscreption",cellStyle:{width:400,minWidth:400,maxWidth:400,height:1}},{title:"UoM",field:"itemUom",cellStyle:{width:150,minWidth:150,maxWidth:150,height:1}},{title:"Unit Rate",field:"itemRate",type:"currency",currencySetting:{currencyCode:"LKR"},cellStyle:{width:200,minWidth:200,maxWidth:200,height:1}}],data:f,icons:U,onSelectionChange:function(e){return G(e)},options:{exportButton:!0,pageSizeOptions:[5,10,20],paginationType:"stepped",showTextRowsSelected:!1,actionsColumnIndex:-1,filtering:!0,selection:!0,tableLayout:"auto",selectionProps:{},rowStyle:{backgroundColor:"#EEE"},headerStyle:{backgroundColor:"#01579b",color:"#FFF"}},actions:[{icon:function(){return(0,B.jsxs)(m.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:L,onChange:function(e){return F(e.target.value)},style:{width:100},children:[(0,B.jsx)(Z.Z,{value:"all",children:(0,B.jsx)("em",{children:"All"})}),(0,B.jsx)(Z.Z,{value:"TX",children:"TX"}),(0,B.jsx)(Z.Z,{value:"IBS",children:"IBS"}),(0,B.jsx)(Z.Z,{value:"BTS",children:"BTS"})]})},tooltip:"Select Rate Card",isFreeAction:!0}],components:{Pagination:function(e){return(0,B.jsxs)("div",{children:[(0,B.jsxs)(s.Z,{container:!0,style:{pading:15,background:"#f5f5f5"},children:[(0,B.jsx)(s.Z,{sm:11,align:"right",item:!0,children:(0,B.jsx)(l.Z,{children:(0,B.jsx)(c.Z,{variant:"contained",type:"submit",color:"primary",onClick:H,children:"Submit"})})}),(0,B.jsx)(s.Z,{sm:1,align:"center",item:!0,children:(0,B.jsx)(l.Z,{children:(0,B.jsx)(c.Z,{variant:"contained",color:"default",onClick:J,children:"Close"})})})]}),(0,B.jsx)(d.Z,(0,a.Z)({},e))]})}}})})})}},61975:function(e,t,i){i.r(t);var a=i(93433),n=i(74165),r=i(15861),o=i(4942),s=i(29439),l=i(1413),c=i(72791),d=i(79271),u=i(74569),f=i.n(u),h=i(16149),m=i(89743),Z=i(2677),p=i(43360),x=i(34575),j=i(19658),g=i(61889),b=i(20890),w=i(15617),v=i.n(w),S=i(82159),C=(i(53063),i(3986)),k=i(29818),y=i(64554),R=i(39157),D=i(13239),O=i(5936),P=i(3395),T=i(872),N=i(31009),B=i(38996),I=i(5130),W=i(82271),V=i(41286),L=i(91903),F=i(12715),A=i(10111),_=i(35585),Q=i(16346),E=i(5403),q=i(97911),G=i(80184),M=c.forwardRef((function(e,t){return(0,G.jsx)(j.Z,(0,l.Z)({elevation:6,ref:t,variant:"filled"},e))}));t.default=(0,d.EN)((function(e){var t=(0,c.useState)([]),i=(0,s.Z)(t,2),d=i[0],u=i[1],j=(0,c.useState)([]),w=(0,s.Z)(j,2),U=w[0],H=w[1],J=(0,c.useState)(!1),K=(0,s.Z)(J,2),z=(K[0],K[1],(0,c.useState)([])),X=(0,s.Z)(z,2),Y=X[0],$=X[1],ee=(0,c.useState)(),te=(0,s.Z)(ee,2),ie=te[0],ae=te[1],ne=(0,c.useState)(),re=(0,s.Z)(ne,2),oe=(re[0],re[1]),se=(0,c.useState)([]),le=(0,s.Z)(se,2),ce=le[0],de=le[1],ue=(0,c.useState)(""),fe=(0,s.Z)(ue,2),he=fe[0],me=fe[1],Ze=(0,c.useState)(""),pe=(0,s.Z)(Ze,2),xe=pe[0],je=pe[1],ge=f().create({baseURL:"http://localhost:8072/"}),be=(0,c.useState)({}),we=(0,s.Z)(be,2),ve=we[0],Se=we[1],Ce=(0,c.useState)({}),ke=(0,s.Z)(Ce,2),ye=ke[0],Re=ke[1],De=(0,c.useState)(!1),Oe=(0,s.Z)(De,2),Pe=Oe[0],Te=Oe[1],Ne=(0,c.useState)(!1),Be=(0,s.Z)(Ne,2),Ie=Be[0],We=Be[1],Ve=(0,c.useState)(0),Le=(0,s.Z)(Ve,2),Fe=Le[0],Ae=Le[1],_e=(0,c.useState)(0),Qe=(0,s.Z)(_e,2),Ee=Qe[0],qe=Qe[1],Ge={Add:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(O.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),Check:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(T.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),Clear:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(I.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),Delete:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(W.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),DetailPanel:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(B.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),Edit:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(V.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),Export:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(Q.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),Filter:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(L.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),FirstPage:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(F.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),LastPage:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(A.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),NextPage:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(B.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),PreviousPage:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(N.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),ResetSearch:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(I.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),Search:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(E.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),SortArrow:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(P.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),ThirdStateCheck:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))})),ViewColumn:(0,c.forwardRef)((function(e,t){return(0,G.jsx)(q.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t}))}))},Me=function(){var e=Y.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{capexopexLine:"Capex"})}));$(e),console.log(e)},Ue=function(){var e=Y.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{capexopexLine:"Opex"})}));$(e),console.log(e)};function He(){for(var e=0,t=0;t<Y.length;t++)e+=Y[t].itemTotal;return oe(e),e}function Je(){for(var e=0,t=0;t<Y.length;t++){"Capex"===Y[t].capexopexLine&&(e+=Y[t].itemTotal)}return Ae(e),e}function Ke(){for(var e=0,t=0;t<Y.length;t++){"Opex"===Y[t].capexopexLine&&(e+=Y[t].itemTotal)}return qe(e),e}(0,c.useEffect)((function(){u([{name:e.location.data.row.assignedMobitelOfficer.name}]),H([{companyName:e.location.data.row.assignedSubcon.companyName}]),Se({taskRef:e.location.data.row.taskRef,siteID:e.location.data.row.siteID,siteName:e.location.data.row.siteName,actualTaskStartDate:e.location.data.row.taskHistory.find((function(e){return"Task commenced"===e.taskStatus})).performedDate.split("T")[0],actualTaskCompletedDate:e.location.data.row.taskHistory.find((function(e){return"Task completed"===e.taskStatus})).performedDate.split("T")[0],taskAssignedDiv:e.location.data.row.taskAssignedDiv,assignedMobitelOfficer:e.location.data.row.assignedMobitelOfficer.name,workScope:e.location.data.row.workScope,assignedSubcon:e.location.data.row.assignedSubcon.companyName}),$(e.location.data.row.boqs[e.location.data.row.boqs.length-1].boqData),ae(e.location.data.row.boqs[e.location.data.row.boqs.length-1].totalCost),de(e.location.data.row.taskHistory.filter((function(e){return"BOQ Verified_0"===e.taskStatus||"BOQ Verified_1"===e.taskStatus||"BOQ Verified_2"===e.taskStatus||"BOQ Rejected"===e.taskStatus||"BOQ submitted"===e.taskStatus})))}),[]);var ze=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://msmsenterpriseapi.mobitel.lk/EnterpriseSMSV3/esmsproxyURL.php",i={username:"smsdigisvc_sci",password:"Sci@#25",from:"Mobitel-PMS",to:"0"+t,text:"You have new BOQ to review. Please login to https://projectonline.mobitel.lk/",mesageType:0},a={method:"POST",body:JSON.stringify(i),mode:"no-cors"},e.next=5,fetch("https://msmsenterpriseapi.mobitel.lk/EnterpriseSMSV3/esmsproxyURL.php",a);case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(e,t){"clickaway"!==t&&Te(!1)};return(0,G.jsxs)("div",{children:[(0,G.jsxs)("div",{className:"content-wrapper",children:[(0,G.jsx)("div",{className:"content-header",children:(0,G.jsx)("section",{className:"content-header",children:(0,G.jsx)("div",{className:"container-fluid",children:(0,G.jsx)("div",{className:"row mb-2",children:(0,G.jsx)("div",{className:"col-sm-6",children:(0,G.jsxs)("h1",{children:["Verify BOQ Task ID: ",ve.taskRef," "]})})})})})}),(0,G.jsx)("section",{className:"content",children:(0,G.jsxs)("div",{className:"container-fluid",children:[(0,G.jsxs)(h.Z,{children:[(0,G.jsxs)(m.Z,{children:[(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Site ID"}),(0,G.jsx)(h.Z.Control,{disabled:!0,value:ve.siteID,className:"col-md-9",type:"text",placeholder:"Enter site ID",isInvalid:!!ye.siteID}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.siteID})]}),(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Site Name"}),(0,G.jsx)(h.Z.Control,{disabled:!0,value:ve.siteName,type:"text",placeholder:"Enter site Name",isInvalid:!!ye.siteName}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.siteName})]}),(0,G.jsx)(h.Z.Group,{as:Z.Z,controlId:""})]}),(0,G.jsxs)(m.Z,{className:"mb-3",children:[(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Actual Work Commencement Date"}),(0,G.jsx)(h.Z.Control,{disabled:!0,value:ve.actualTaskStartDate,className:"col-md-9",type:"date",isInvalid:!!ye.actualTaskStartDate}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.actualTaskStartDate})]}),(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Actual Work Completed Date"}),(0,G.jsx)(h.Z.Control,{disabled:!0,value:ve.actualTaskCompletedDate,className:"col-md-9",type:"date",isInvalid:!!ye.actualTaskCompletedDate}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.actualTaskCompletedDate})]}),(0,G.jsx)(h.Z.Group,{as:Z.Z})]}),(0,G.jsxs)(m.Z,{children:[(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Task Assigned Division"}),(0,G.jsxs)(h.Z.Control,{disabled:!0,value:ve.taskAssignedDiv,as:"select",defaultValue:"Choose...",isInvalid:!!ye.taskAssignedDiv,children:[(0,G.jsx)("option",{children:"Choose..."}),(0,G.jsx)("option",{children:"Project_Radio"}),(0,G.jsx)("option",{children:"Project_Core"}),(0,G.jsx)("option",{children:"Project_TX"}),(0,G.jsx)("option",{children:"Project_IBS"}),(0,G.jsx)("option",{children:"Project_WiFi"})]}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.taskAssignedDiv})]}),(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Assigned Mobitel Officer"}),(0,G.jsxs)(h.Z.Control,{disabled:!0,as:"select",value:ve.assignedMobitelOfficer,defaultValue:"Choose...",isInvalid:!!ye.assignedMobitelOfficer,children:[(0,G.jsx)("option",{children:"Choose..."}),d.map((function(e){return(0,G.jsx)("option",{value:e._id,children:e.name})}))]}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.assignedMobitelOfficer})]}),(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Assigned subcontractor"}),(0,G.jsxs)(h.Z.Control,{disabled:!0,value:ve.assignedSubcon,as:"select",defaultValue:"Choose...",isInvalid:!!ye.assignedSubcon,children:[(0,G.jsx)("option",{children:"Choose..."}),U.map((function(e){return(0,G.jsx)("option",{value:e._id,children:e.companyName})}))]}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.assignedSubcon})]})]}),(0,G.jsx)(m.Z,{children:(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"High level work scope"}),(0,G.jsx)(h.Z.Control,{disabled:!0,value:ve.workScope,as:"textarea",rows:2,placeholder:"",isInvalid:!!ye.workScope}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.workScope})]})})]}),(0,G.jsx)(v(),{title:"Verify BOQ-"+ve.siteID+"_"+ve.taskRef,data:Y,columns:[{title:"ERP Code",field:"erpCode",filtering:!1,editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Rate Card Div",field:"rateCardDiv",editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Item Discreption",field:"itemDiscreption",filtering:!1,editable:!1,cellStyle:{width:300,minWidth:300,maxWidth:300,height:1}},{title:"UoM",field:"itemUom",editable:!1,cellStyle:{width:50,minWidth:50,maxWidth:50,height:1}},{title:"Unit Rate",field:"itemRate",editable:!1,filtering:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Quantity",field:"itemQty",editable:!1,cellStyle:{width:50,minWidth:50,maxWidth:50,height:1}},{title:"Item Total",field:"itemTotal",type:"currency",currencySetting:{currencyCode:"LKR"},editable:!1,cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Capex/Opex",field:"capexopexLine",lookup:{Capex:"Capex",Opex:"Opex"},cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}},{title:"Comment",field:"itemComment",editable:"onUpdate",cellStyle:{width:100,minWidth:100,maxWidth:100,height:1}}],icons:Ge,editable:{onRowUpdate:function(e,t){return new Promise((function(i,n){var r=t.tableData.id,o=(0,a.Z)(Y);console.log(e.capexopexLine),e.itemTotal=e.itemRate*e.itemQty,o[r]=e,setTimeout((function(){$(o),i()}),1e3)}))}},options:{exportButton:!0,pageSizeOptions:[Y.length,5,10,20],paginationType:"stepped",showTextRowsSelected:!1,actionsColumnIndex:-1,filtering:!1,tableLayout:"auto",rowStyle:{backgroundColor:"#EEE"},headerStyle:{backgroundColor:"#01579b",color:"#FFF"}},components:{Pagination:function(e){return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(g.ZP,{container:!0,justifyContent:"flex-end",children:[(0,G.jsx)(p.Z,{variant:"primary",style:{marginRight:"8px"},onClick:Me,children:"All Capex"}),(0,G.jsx)(p.Z,{variant:"primary",onClick:Ue,children:"All Opex"})]}),(0,G.jsxs)(g.ZP,{container:!0,style:{pading:300,background:"#f5f5f5"},children:[(0,G.jsxs)(g.ZP,{sm:9,item:!0,children:[(0,G.jsx)(b.Z,{align:"right",variant:"subtitle1",children:"Capex Amount"}),(0,G.jsx)(b.Z,{align:"right",variant:"subtitle1",children:"Opex Amount"}),(0,G.jsx)(b.Z,{align:"right",fontWeight:"bold",variant:"subtitle1",children:"Total Amount"})]}),(0,G.jsxs)(g.ZP,{sm:3,align:"center",children:[(0,G.jsx)(b.Z,{align:"right",variant:"subtitle1",children:"LKR "+Je().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,G.jsx)(b.Z,{align:"right",variant:"subtitle1",children:"LKR "+Ke().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,G.jsx)(b.Z,{align:"right",variant:"subtitle1",fontWeight:"bold",children:"LKR "+He().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]})]}),(0,G.jsx)(S.Z,(0,l.Z)({},e))]})}}}),(0,G.jsx)("br",{}),(0,G.jsx)(m.Z,{children:(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Approval History"}),(0,G.jsx)("div",{style:{height:250,width:"100%"},children:(0,G.jsx)(C._$r,{getRowId:function(e){return e._id},rows:ce,columns:[{field:"taskStatus",headerName:"Status",width:250},{field:"performedDate",headerName:"Performed Date",width:200,valueGetter:function(e){return e.row.performedDate.split("T")[0]}},{field:"performedBy",headerName:"Performed by",width:200,valueGetter:function(e){return e.row.performedBy.name}},{field:"comment",headerName:"Comment",width:500}],pageSize:5,rowsPerPageOptions:[5],rowHeight:30,headerHeight:40})})]})}),(0,G.jsx)(m.Z,{children:(0,G.jsxs)(h.Z.Group,{as:Z.Z,children:[(0,G.jsx)(h.Z.Label,{children:"Comments"}),(0,G.jsx)(h.Z.Control,{onChange:function(e){return t="boqVerifiedComment",i=e.target.value,Se((0,l.Z)((0,l.Z)({},ve),{},(0,o.Z)({},t,i))),void(ye[t]&&Re((0,l.Z)((0,l.Z)({},ye),{},(0,o.Z)({},t,null))));var t,i},as:"textarea",rows:2,value:ve.boqVerifiedComment,placeholder:"Enter your comments",isInvalid:!!ye.boqVerifiedComment}),(0,G.jsx)(h.Z.Control.Feedback,{type:"invalid",children:ye.boqVerifiedComment})]})}),(0,G.jsx)(p.Z,{variant:"warning",onClick:function(t){t.preventDefault();var i=function(){var e=ve.boqVerifiedComment,t={};return e&&""!==e||(t.boqVerifiedComment="cannot be blank!"),t}();if(Object.keys(i).length>0)Re(i);else{ge.put("projonline/update/"+e.location.data.row._id,{totalCost:ie,boqData:Y,taskObject:{taskStatus:"BOQ Rejected"},taskHistory:{taskStatus:"BOQ Rejected",comment:ve.boqVerifiedComment}},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(t){We(!0),setTimeout((function(){je(t.data.alart),me(t.data.severity),Te(!0)}),2e3),setTimeout((function(){We(!1),Te(!1),e.history.push({pathname:"/verifyBoqTasks"})}),5e3)})).catch((function(e){console.log(e)}))}},children:"Reject BOQ"})," ",(0,G.jsx)(p.Z,{variant:"primary",onClick:function(t){t.preventDefault();var i,a=function(){var e=ve.boqVerifiedComment,t={};switch(!0){case(!e||""===e)&&Je()+Ke()!==He():t.boqVerifiedComment="Capex/Opex type and Comment cannot be blank!";break;case!e||""===e:t.boqVerifiedComment="Comment cannot be blank!";break;case Je()+Ke()!==He():t.boqVerifiedComment="Capex/Opex type cannot be blank!"}return t}();Object.keys(a).length>0?(Re(a),console.log(Y)):("BOQ submitted"===e.location.data.row.taskStatus?(i={taskStatus:"BOQ Verified_0"},ze(e.location.data.row.approvalPath[1].assignedOfficer.mobileNo)):"BOQ Verified_0"===e.location.data.row.taskStatus&&4===e.location.data.row.approvalPath.length?(i={taskStatus:"BOQ Verified_1"},ze(e.location.data.row.approvalPath[2].assignedOfficer.mobileNo)):("BOQ Verified_1"===e.location.data.row.taskStatus||"BOQ Verified_0"===e.location.data.row.taskStatus&&3===e.location.data.row.approvalPath.length)&&(i={taskStatus:"BOQ Verified_2"},"BOQ Verified_1"===e.location.data.row.taskStatus?ze(e.location.data.row.approvalPath[3].assignedOfficer.mobileNo):ze(e.location.data.row.approvalPath[2].assignedOfficer.mobileNo)),ge.put("projonline/update/"+e.location.data.row._id,{CapexPrAmount:Fe,OpexPrAmount:Ee,totalCost:ie,boqData:Y,taskObject:i,taskHistory:{taskStatus:i.taskStatus,comment:ve.boqVerifiedComment}},{headers:{token:"Bearer "+JSON.parse(localStorage.getItem("user")).accessToken}}).then((function(t){console.log(">>>>>>>>>>>>>>>>>"),console.log(Y),console.log("CapexPrAmount="+Fe),console.log("OpexPrAmount="+Ee),console.log("totalCost="+ie),console.log(t.data),console.log(">>>>>>>>>>>>>>>>>"),We(!0),setTimeout((function(){je(t.data.alart),me(t.data.severity),Te(!0)}),2e3),setTimeout((function(){We(!1),Te(!1),e.history.push({pathname:"/verifyBoqTasks"})}),5e3)})).catch((function(e){console.log(e)})))},children:"BOQ Verified"})]})})]}),(0,G.jsx)(x.Z,{open:Pe,autoHideDuration:6e3,onClose:Xe,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,G.jsx)(M,{onClose:Xe,severity:he,sx:{width:"100%"},children:xe})}),(0,G.jsx)(k.Z,{open:Ie,onClose:Xe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,G.jsx)(R.Z,{children:(0,G.jsx)(y.Z,{sx:{display:"flex"},children:(0,G.jsx)(D.Z,{})})})})]})}))}}]);
//# sourceMappingURL=1975.7732d962.chunk.js.map